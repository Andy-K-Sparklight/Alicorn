(()=>{var e={657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],s=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement",...r],o=["null","undefined","string","number","bigint","boolean","symbol"];function n(e){return t=>typeof t===e}const{toString:i}=Object.prototype,a=e=>{const t=i.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&l.domElement(e)?"HTMLElement":(r=t,s.includes(r)?t:void 0);var r},c=e=>t=>a(t)===e;function l(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(l.observable(e))return"Observable";if(l.array(e))return"Array";if(l.buffer(e))return"Buffer";const t=a(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}l.undefined=n("undefined"),l.string=n("string");const u=n("number");l.number=e=>u(e)&&!l.nan(e),l.bigint=n("bigint"),l.function_=n("function"),l.null_=e=>null===e,l.class_=e=>l.function_(e)&&e.toString().startsWith("class "),l.boolean=e=>!0===e||!1===e,l.symbol=n("symbol"),l.numericString=e=>l.string(e)&&!l.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),l.array=(e,t)=>!!Array.isArray(e)&&(!l.function_(t)||e.every(t)),l.buffer=e=>{var t,r,s,o;return null!==(o=null===(s=null===(r=null===(t=e)||void 0===t?void 0:t.constructor)||void 0===r?void 0:r.isBuffer)||void 0===s?void 0:s.call(r,e))&&void 0!==o&&o},l.nullOrUndefined=e=>l.null_(e)||l.undefined(e),l.object=e=>!l.null_(e)&&("object"==typeof e||l.function_(e)),l.iterable=e=>{var t;return l.function_(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},l.asyncIterable=e=>{var t;return l.function_(null===(t=e)||void 0===t?void 0:t[Symbol.asyncIterator])},l.generator=e=>l.iterable(e)&&l.function_(e.next)&&l.function_(e.throw),l.asyncGenerator=e=>l.asyncIterable(e)&&l.function_(e.next)&&l.function_(e.throw),l.nativePromise=e=>c("Promise")(e),l.promise=e=>l.nativePromise(e)||(e=>{var t,r;return l.function_(null===(t=e)||void 0===t?void 0:t.then)&&l.function_(null===(r=e)||void 0===r?void 0:r.catch)})(e),l.generatorFunction=c("GeneratorFunction"),l.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===a(e),l.asyncFunction=e=>"AsyncFunction"===a(e),l.boundFunction=e=>l.function_(e)&&!e.hasOwnProperty("prototype"),l.regExp=c("RegExp"),l.date=c("Date"),l.error=c("Error"),l.map=e=>c("Map")(e),l.set=e=>c("Set")(e),l.weakMap=e=>c("WeakMap")(e),l.weakSet=e=>c("WeakSet")(e),l.int8Array=c("Int8Array"),l.uint8Array=c("Uint8Array"),l.uint8ClampedArray=c("Uint8ClampedArray"),l.int16Array=c("Int16Array"),l.uint16Array=c("Uint16Array"),l.int32Array=c("Int32Array"),l.uint32Array=c("Uint32Array"),l.float32Array=c("Float32Array"),l.float64Array=c("Float64Array"),l.bigInt64Array=c("BigInt64Array"),l.bigUint64Array=c("BigUint64Array"),l.arrayBuffer=c("ArrayBuffer"),l.sharedArrayBuffer=c("SharedArrayBuffer"),l.dataView=c("DataView"),l.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,l.urlInstance=e=>c("URL")(e),l.urlString=e=>{if(!l.string(e))return!1;try{return new URL(e),!0}catch(e){return!1}},l.truthy=e=>Boolean(e),l.falsy=e=>!e,l.nan=e=>Number.isNaN(e),l.primitive=e=>{return l.null_(e)||(t=typeof e,o.includes(t));var t},l.integer=e=>Number.isInteger(e),l.safeInteger=e=>Number.isSafeInteger(e),l.plainObject=e=>{if("[object Object]"!==i.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})},l.typedArray=e=>{return t=a(e),r.includes(t);var t},l.arrayLike=e=>!l.nullOrUndefined(e)&&!l.function_(e)&&(e=>l.safeInteger(e)&&e>=0)(e.length),l.inRange=(e,t)=>{if(l.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(l.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const h=["innerHTML","ownerDocument","style","attributes","nodeValue"];l.domElement=e=>l.object(e)&&1===e.nodeType&&l.string(e.nodeName)&&!l.plainObject(e)&&h.every((t=>t in e)),l.observable=e=>{var t,r,s,o;return!!e&&(e===(null===(r=(t=e)[Symbol.observable])||void 0===r?void 0:r.call(t))||e===(null===(o=(s=e)["@@observable"])||void 0===o?void 0:o.call(s)))},l.nodeStream=e=>l.object(e)&&l.function_(e.pipe)&&!l.observable(e),l.infinite=e=>e===1/0||e===-1/0;const d=e=>t=>l.integer(t)&&Math.abs(t%2)===e;l.evenInteger=d(0),l.oddInteger=d(1),l.emptyArray=e=>l.array(e)&&0===e.length,l.nonEmptyArray=e=>l.array(e)&&e.length>0,l.emptyString=e=>l.string(e)&&0===e.length,l.nonEmptyString=e=>l.string(e)&&e.length>0,l.emptyStringOrWhitespace=e=>l.emptyString(e)||(e=>l.string(e)&&!/\S/.test(e))(e),l.emptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&0===Object.keys(e).length,l.nonEmptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&Object.keys(e).length>0,l.emptySet=e=>l.set(e)&&0===e.size,l.nonEmptySet=e=>l.set(e)&&e.size>0,l.emptyMap=e=>l.map(e)&&0===e.size,l.nonEmptyMap=e=>l.map(e)&&e.size>0;const f=(e,t,r)=>{if(!l.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===r.length)throw new TypeError("Invalid number of values");return e.call(r,t)};l.any=(e,...t)=>(l.array(e)?e:[e]).some((e=>f(Array.prototype.some,e,t))),l.all=(e,...t)=>f(Array.prototype.every,e,t);const p=(e,t,r,s={})=>{if(!e){const{multipleValues:e}=s,o=e?`received values of types ${[...new Set(r.map((e=>`\`${l(e)}\``)))].join(", ")}`:`received value of type \`${l(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${o}.`)}};t.assert={undefined:e=>p(l.undefined(e),"undefined",e),string:e=>p(l.string(e),"string",e),number:e=>p(l.number(e),"number",e),bigint:e=>p(l.bigint(e),"bigint",e),function_:e=>p(l.function_(e),"Function",e),null_:e=>p(l.null_(e),"null",e),class_:e=>p(l.class_(e),"Class",e),boolean:e=>p(l.boolean(e),"boolean",e),symbol:e=>p(l.symbol(e),"symbol",e),numericString:e=>p(l.numericString(e),"string with a number",e),array:(e,t)=>{p(l.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>p(l.buffer(e),"Buffer",e),nullOrUndefined:e=>p(l.nullOrUndefined(e),"null or undefined",e),object:e=>p(l.object(e),"Object",e),iterable:e=>p(l.iterable(e),"Iterable",e),asyncIterable:e=>p(l.asyncIterable(e),"AsyncIterable",e),generator:e=>p(l.generator(e),"Generator",e),asyncGenerator:e=>p(l.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>p(l.nativePromise(e),"native Promise",e),promise:e=>p(l.promise(e),"Promise",e),generatorFunction:e=>p(l.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>p(l.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>p(l.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>p(l.boundFunction(e),"Function",e),regExp:e=>p(l.regExp(e),"RegExp",e),date:e=>p(l.date(e),"Date",e),error:e=>p(l.error(e),"Error",e),map:e=>p(l.map(e),"Map",e),set:e=>p(l.set(e),"Set",e),weakMap:e=>p(l.weakMap(e),"WeakMap",e),weakSet:e=>p(l.weakSet(e),"WeakSet",e),int8Array:e=>p(l.int8Array(e),"Int8Array",e),uint8Array:e=>p(l.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>p(l.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>p(l.int16Array(e),"Int16Array",e),uint16Array:e=>p(l.uint16Array(e),"Uint16Array",e),int32Array:e=>p(l.int32Array(e),"Int32Array",e),uint32Array:e=>p(l.uint32Array(e),"Uint32Array",e),float32Array:e=>p(l.float32Array(e),"Float32Array",e),float64Array:e=>p(l.float64Array(e),"Float64Array",e),bigInt64Array:e=>p(l.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>p(l.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>p(l.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>p(l.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>p(l.dataView(e),"DataView",e),urlInstance:e=>p(l.urlInstance(e),"URL",e),urlString:e=>p(l.urlString(e),"string with a URL",e),truthy:e=>p(l.truthy(e),"truthy",e),falsy:e=>p(l.falsy(e),"falsy",e),nan:e=>p(l.nan(e),"NaN",e),primitive:e=>p(l.primitive(e),"primitive",e),integer:e=>p(l.integer(e),"integer",e),safeInteger:e=>p(l.safeInteger(e),"integer",e),plainObject:e=>p(l.plainObject(e),"plain object",e),typedArray:e=>p(l.typedArray(e),"TypedArray",e),arrayLike:e=>p(l.arrayLike(e),"array-like",e),domElement:e=>p(l.domElement(e),"HTMLElement",e),observable:e=>p(l.observable(e),"Observable",e),nodeStream:e=>p(l.nodeStream(e),"Node.js Stream",e),infinite:e=>p(l.infinite(e),"infinite number",e),emptyArray:e=>p(l.emptyArray(e),"empty array",e),nonEmptyArray:e=>p(l.nonEmptyArray(e),"non-empty array",e),emptyString:e=>p(l.emptyString(e),"empty string",e),nonEmptyString:e=>p(l.nonEmptyString(e),"non-empty string",e),emptyStringOrWhitespace:e=>p(l.emptyStringOrWhitespace(e),"empty string or whitespace",e),emptyObject:e=>p(l.emptyObject(e),"empty object",e),nonEmptyObject:e=>p(l.nonEmptyObject(e),"non-empty object",e),emptySet:e=>p(l.emptySet(e),"empty set",e),nonEmptySet:e=>p(l.nonEmptySet(e),"non-empty set",e),emptyMap:e=>p(l.emptyMap(e),"empty map",e),nonEmptyMap:e=>p(l.nonEmptyMap(e),"non-empty map",e),evenInteger:e=>p(l.evenInteger(e),"even integer",e),oddInteger:e=>p(l.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>p(l.directInstanceOf(e,t),"T",e),inRange:(e,t)=>p(l.inRange(e,t),"in range",e),any:(e,...t)=>p(l.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>p(l.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})},Object.defineProperties(l,{class:{value:l.class_},function:{value:l.function_},null:{value:l.null_}}),Object.defineProperties(t.assert,{class:{value:t.assert.class_},function:{value:t.assert.function_},null:{value:t.assert.null_}}),t.default=l,e.exports=l,e.exports.default=l,e.exports.assert=t.assert},81:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(1313),o=Number(process.versions.node.split(".")[0]),n=e=>{const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const r=e=>{const r=e.emit.bind(e);e.emit=(s,...o)=>("error"===s&&(t.error=Date.now(),t.phases.total=t.error-t.start,e.emit=r),r(s,...o))};r(e),e.prependOnceListener("abort",(()=>{t.abort=Date.now(),(!t.response||o>=13)&&(t.phases.total=Date.now()-t.start)}));const n=e=>{t.socket=Date.now(),t.phases.wait=t.socket-t.start;const r=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",r),s.default(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",r),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?n(e.socket):e.prependOnceListener("socket",n);const i=()=>{var e;t.upload=Date.now(),t.phases.request=t.upload-(null!=(e=t.secureConnect)?e:t.connect)};return("boolean"==typeof e.writableFinished?!e.writableFinished:!e.finished||0!==e.outputSize||e.socket&&0!==e.socket.writableLength)?e.prependOnceListener("finish",i):i(),e.prependOnceListener("response",(e=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,e.timings=t,r(e),e.prependOnceListener("end",(()=>{t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start}))})),t};t.default=n,e.exports=n,e.exports.default=n},6455:(e,t,r)=>{"use strict";const s=r(5602),o=r(5281);class n extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t=(e=[...e].map((e=>e instanceof Error?e:null!==e&&"object"==typeof e?Object.assign(new Error(e.message),e):new Error(e)))).map((e=>"string"==typeof e.stack?o(e.stack).replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""):String(e))).join("\n");t="\n"+s(t,4),super(t),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(const e of this._errors)yield e}}e.exports=n},1021:e=>{"use strict";e.exports=e=>null==e?[]:Array.isArray(e)?e:"string"==typeof e?[e]:"function"==typeof e[Symbol.iterator]?[...e]:[e]},3266:(e,t,r)=>{"use strict";const{V4MAPPED:s,ADDRCONFIG:o,ALL:n,promises:{Resolver:i},lookup:a}=r(881),{promisify:c}=r(1669),l=r(2087),u=Symbol("cacheableLookupCreateConnection"),h=Symbol("cacheableLookupInstance"),d=Symbol("expires"),f="number"==typeof n,p=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},m=()=>{let e=!1,t=!1;for(const r of Object.values(l.networkInterfaces()))for(const s of r)if(!s.internal&&("IPv6"===s.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},y={ttl:!0},g={all:!0};class _{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:r=3600,errorTtl:s=.15,resolver:o=new i,lookup:n=a}={}){if(this.maxTtl=t,this.errorTtl=s,this._cache=e,this._resolver=o,this._dnsLookup=c(n),this._resolver instanceof i?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=c(this._resolver.resolve4.bind(this._resolver)),this._resolve6=c(this._resolver.resolve6.bind(this._resolver))),this._iface=m(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,r<1)this._fallback=!1;else{this._fallback=!0;const e=setInterval((()=>{this._hostnamesToFallback.clear()}),1e3*r);e.unref&&e.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if("function"==typeof t?(r=t,t={}):"number"==typeof t&&(t={family:t}),!r)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then((e=>{t.all?r(null,e):r(null,e.address,e.family,e.expires,e.ttl)}),r)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let r=await this.query(e);if(6===t.family){const e=r.filter((e=>6===e.family));t.hints&s&&(f&&t.hints&n||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address=`::ffff:${t.address}`,t.family=6)})(r):r=e}else 4===t.family&&(r=r.filter((e=>4===e.family)));if(t.hints&o){const{_iface:e}=this;r=r.filter((t=>6===t.family?e.has6:e.has4))}if(0===r.length){const t=new Error(`cacheableLookup ENOTFOUND ${e}`);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?r:r[0]}async query(e){let t=await this._cache.get(e);if(!t){const r=this._pending[e];if(r)t=await r;else{const r=this.queryAndCache(e);this._pending[e]=r;try{t=await r}finally{delete this._pending[e]}}}return t=t.map((e=>({...e}))),t}async _resolve(e){const[t,r]=await Promise.all([this._resolve4(e,y),this._resolve6(e,y)].map((e=>(async e=>{try{return await e}catch(e){if("ENODATA"===e.code||"ENOTFOUND"===e.code)return[];throw e}})(e))));let s=0,o=0,n=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,s=Math.max(s,e.ttl);for(const e of r)e.family=6,e.expires=i+1e3*e.ttl,o=Math.max(o,e.ttl);return n=t.length>0?r.length>0?Math.min(s,o):s:o,{entries:[...t,...r],cacheTtl:n}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch(e){return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=1e3*Math.min(r,this.maxTtl),t[d]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}s=this._cache,Symbol.iterator in s&&this._tick(r)}var s}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,g);let t=await this._resolve(e);0===t.entries.length&&this._fallback&&(t=await this._lookup(e),0!==t.entries.length&&this._hostnamesToFallback.add(e));const r=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,r),t.entries}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout((()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[r,s]of this._cache){const o=s[d];t>=o?this._cache.delete(r):o<e&&(e=o)}e!==1/0&&this._tick(e-t)}),e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(p(e),u in e)throw new Error("CacheableLookup has been already installed");e[u]=e.createConnection,e[h]=this,e.createConnection=(t,r)=>("lookup"in t||(t.lookup=this.lookup),e[u](t,r))}uninstall(e){if(p(e),e[u]){if(e[h]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[u],delete e[u],delete e[h]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=m(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}e.exports=_,e.exports.default=_},3481:(e,t,r)=>{"use strict";const s=r(8614),o=r(8835),n=r(15),i=r(31),a=r(6214),c=r(4259),l=r(5989),u=r(9715),h=r(4958);class d{constructor(e,t){if("function"!=typeof e)throw new TypeError("Parameter `request` must be a function");return this.cache=new h({uri:"string"==typeof t&&t,store:"string"!=typeof t&&t,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(t,r)=>{let h;if("string"==typeof t)h=p(o.parse(t)),t={};else if(t instanceof o.URL)h=p(o.parse(t.toString())),t={};else{const[e,...r]=(t.path||"").split("?"),s=r.length>0?`?${r.join("?")}`:"";h=p({...t,pathname:e,search:s})}(t={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...t,...f(h)}).headers=l(t.headers);const m=new s,y=n(o.format(h),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),g=`${t.method}:${y}`;let _=!1,w=!1;const b=t=>{w=!0;let s,o=!1;const n=new Promise((e=>{s=()=>{o||(o=!0,e())}})),l=e=>{if(_&&!t.forceRefresh){e.status=e.statusCode;const r=a.fromObject(_.cachePolicy).revalidatedPolicy(t,e);if(!r.modified){const t=r.policy.responseHeaders();(e=new c(_.statusCode,t,_.body,_.url)).cachePolicy=r.policy,e.fromCache=!0}}let s;e.fromCache||(e.cachePolicy=new a(t,e,t),e.fromCache=!1),t.cache&&e.cachePolicy.storable()?(s=u(e),(async()=>{try{const r=i.buffer(e);if(await Promise.race([n,new Promise((t=>e.once("end",t)))]),o)return;const s=await r,a={cachePolicy:e.cachePolicy.toObject(),url:e.url,statusCode:e.fromCache?_.statusCode:e.statusCode,body:s};let c=t.strictTtl?e.cachePolicy.timeToLive():void 0;t.maxTtl&&(c=c?Math.min(c,t.maxTtl):t.maxTtl),await this.cache.set(g,a,c)}catch(e){m.emit("error",new d.CacheError(e))}})()):t.cache&&_&&(async()=>{try{await this.cache.delete(g)}catch(e){m.emit("error",new d.CacheError(e))}})(),m.emit("response",s||e),"function"==typeof r&&r(s||e)};try{const r=e(t,l);r.once("error",s),r.once("abort",s),m.emit("request",r)}catch(e){m.emit("error",new d.RequestError(e))}};return(async()=>{const e=async e=>{await Promise.resolve();const t=e.cache?await this.cache.get(g):void 0;if(void 0===t)return b(e);const s=a.fromObject(t.cachePolicy);if(s.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=s.responseHeaders(),o=new c(t.statusCode,e,t.body,t.url);o.cachePolicy=s,o.fromCache=!0,m.emit("response",o),"function"==typeof r&&r(o)}else _=t,e.headers=s.revalidationHeaders(e),b(e)},s=e=>m.emit("error",new d.CacheError(e));this.cache.once("error",s),m.on("response",(()=>this.cache.removeListener("error",s)));try{await e(t)}catch(e){t.automaticFailover&&!w&&b(t),m.emit("error",new d.CacheError(e))}})(),m}}}function f(e){const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t}function p(e){return{protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}}d.RequestError=class extends Error{constructor(e){super(e.message),this.name="RequestError",Object.assign(this,e)}},d.CacheError=class extends Error{constructor(e){super(e.message),this.name="CacheError",Object.assign(this,e)}},e.exports=d},5281:(e,t,r)=>{"use strict";const s=r(2087),o=/\s+at.*(?:\(|\s)(.*)\)?/,n=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,i=void 0===s.homedir?"":s.homedir();e.exports=(e,t)=>(t=Object.assign({pretty:!1},t),e.replace(/\\/g,"/").split("\n").filter((e=>{const t=e.match(o);if(null===t||!t[1])return!0;const r=t[1];return!r.includes(".app/Contents/Resources/electron.asar")&&!r.includes(".app/Contents/Resources/default_app.asar")&&!n.test(r)})).filter((e=>""!==e.trim())).map((e=>t.pretty?e.replace(o,((e,t)=>e.replace(t,t.replace(i,"~")))):e)).join("\n"))},9715:(e,t,r)=>{"use strict";const s=r(2413).PassThrough,o=r(6344);e.exports=e=>{if(!e||!e.pipe)throw new TypeError("Parameter `response` must be a response stream.");const t=new s;return o(e,t),e.pipe(t)}},346:(e,t,r)=>{"use strict";const{Transform:s,PassThrough:o}=r(2413),n=r(8761),i=r(1511);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const r="br"===t;if(r&&"function"!=typeof n.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new s({transform(e,t,r){a=!1,r(null,e)},flush(e){e()}}),l=new o({autoDestroy:!1,destroy(t,r){e.destroy(),r(t)}}),u=r?n.createBrotliDecompress():n.createUnzip();return u.once("error",(t=>{!a||e.readable?l.destroy(t):l.end()})),i(e,l),e.pipe(c).pipe(u).pipe(l),l}},1511:e=>{"use strict";const t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,r)=>{if(r._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const s=new Set(Object.keys(e).concat(t)),o={};for(const t of s)t in r||(o[t]={get(){const r=e[t];return"function"==typeof r?r.bind(e):r},set(r){e[t]=r},enumerable:!0,configurable:!1});return Object.defineProperties(r,o),e.once("aborted",(()=>{r.destroy(),r.emit("aborted")})),e.once("close",(()=>{e.complete&&r.readable?r.once("end",(()=>{r.emit("close")})):r.emit("close")})),r}},1313:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=(e,t)=>{let r;r="function"==typeof t?{connect:t}:t;const s="function"==typeof r.connect,o="function"==typeof r.secureConnect,n="function"==typeof r.close,i=()=>{s&&r.connect(),function(e){return e.encrypted}(e)&&o&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),n&&e.once("close",r.close)};e.writable&&!e.connecting?i():e.connecting?e.once("connect",i):e.destroyed&&n&&r.close(e._hadError)};t.default=r,e.exports=r,e.exports.default=r},2840:(e,t,r)=>{var s=r(778),o=function(){},n=function(e,t,r){if("function"==typeof t)return n(e,null,t);t||(t={}),r=s(r||o);var i=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,u=!1,h=function(){e.writable||d()},d=function(){l=!1,c||r.call(e)},f=function(){c=!1,l||r.call(e)},p=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){r.call(e,t)},y=function(){process.nextTick(g)},g=function(){if(!u)return(!c||a&&a.ended&&!a.destroyed)&&(!l||i&&i.ended&&!i.destroyed)?void 0:r.call(e,new Error("premature close"))},_=function(){e.req.on("finish",d)};return function(e){return e.setHeader&&"function"==typeof e.abort}(e)?(e.on("complete",d),e.on("abort",y),e.req?_():e.on("request",_)):l&&!i&&(e.on("end",h),e.on("close",h)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",p),e.on("end",f),e.on("finish",d),!1!==t.error&&e.on("error",m),e.on("close",y),function(){u=!0,e.removeListener("complete",d),e.removeListener("abort",y),e.removeListener("request",_),e.req&&e.req.removeListener("finish",d),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",d),e.removeListener("exit",p),e.removeListener("end",f),e.removeListener("error",m),e.removeListener("close",y)}};e.exports=n},5302:(e,t,r)=>{"use strict";const s=r(77),o=r(5622),n=r(1381).mkdirsSync,i=r(318).utimesMillisSync,a=r(2733);function c(e,t,r,n){const i=(n.dereference?s.statSync:s.lstatSync)(t);if(i.isDirectory())return function(e,t,r,o,n){return t?h(r,o,n):function(e,t,r,o){return s.mkdirSync(r),h(t,r,o),u(r,e)}(e.mode,r,o,n)}(i,e,t,r,n);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function(e,t,r,o,n){return t?function(e,t,r,o){if(o.overwrite)return s.unlinkSync(r),l(e,t,r,o);if(o.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,o,n):l(e,r,o,n)}(i,e,t,r,n);if(i.isSymbolicLink())return function(e,t,r,n){let i=s.readlinkSync(t);if(n.dereference&&(i=o.resolve(process.cwd(),i)),e){let e;try{e=s.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return s.symlinkSync(i,r);throw e}if(n.dereference&&(e=o.resolve(process.cwd(),e)),a.isSrcSubdir(i,e))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${e}'.`);if(s.statSync(r).isDirectory()&&a.isSrcSubdir(e,i))throw new Error(`Cannot overwrite '${e}' with '${i}'.`);return function(e,t){return s.unlinkSync(t),s.symlinkSync(e,t)}(i,r)}return s.symlinkSync(i,r)}(e,t,r,n);if(i.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(i.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function l(e,t,r,o){return s.copyFileSync(t,r),o.preserveTimestamps&&function(e,t,r){(function(e){return 0==(128&e)})(e)&&function(e,t){u(e,128|t)}(r,e),function(e,t){const r=s.statSync(e);i(t,r.atime,r.mtime)}(t,r)}(e.mode,t,r),u(r,e.mode)}function u(e,t){return s.chmodSync(e,t)}function h(e,t,r){s.readdirSync(e).forEach((s=>function(e,t,r,s){const n=o.join(t,e),i=o.join(r,e),{destStat:l}=a.checkPathsSync(n,i,"copy",s);return function(e,t,r,s){if(!s.filter||s.filter(t,r))return c(e,t,r,s)}(l,n,i,s)}(s,e,t,r)))}e.exports=function(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:i,destStat:l}=a.checkPathsSync(e,t,"copy",r);return a.checkParentPathsSync(e,i,t,"copy"),function(e,t,r,i){if(i.filter&&!i.filter(t,r))return;const a=o.dirname(r);return s.existsSync(a)||n(a),c(e,t,r,i)}(l,e,t,r)}},8690:(e,t,r)=>{"use strict";e.exports={copySync:r(5302)}},7189:(e,t,r)=>{"use strict";const s=r(77),o=r(5622),n=r(1381).mkdirs,i=r(9257).pathExists,a=r(318).utimesMillis,c=r(2733);function l(e,t,r,s,a){const c=o.dirname(r);i(c,((o,i)=>o?a(o):i?h(e,t,r,s,a):void n(c,(o=>o?a(o):h(e,t,r,s,a)))))}function u(e,t,r,s,o,n){Promise.resolve(o.filter(r,s)).then((i=>i?e(t,r,s,o,n):n()),(e=>n(e)))}function h(e,t,r,n,i){(n.dereference?s.stat:s.lstat)(t,((a,l)=>a?i(a):l.isDirectory()?function(e,t,r,o,n,i){return t?m(r,o,n,i):function(e,t,r,o,n){s.mkdir(r,(s=>{if(s)return n(s);m(t,r,o,(t=>t?n(t):p(r,e,n)))}))}(e.mode,r,o,n,i)}(l,e,t,r,n,i):l.isFile()||l.isCharacterDevice()||l.isBlockDevice()?function(e,t,r,o,n,i){return t?function(e,t,r,o,n){if(!o.overwrite)return o.errorOnExist?n(new Error(`'${r}' already exists`)):n();s.unlink(r,(s=>s?n(s):d(e,t,r,o,n)))}(e,r,o,n,i):d(e,r,o,n,i)}(l,e,t,r,n,i):l.isSymbolicLink()?function(e,t,r,n,i){s.readlink(t,((t,a)=>t?i(t):(n.dereference&&(a=o.resolve(process.cwd(),a)),e?void s.readlink(r,((t,l)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?s.symlink(a,r,i):i(t):(n.dereference&&(l=o.resolve(process.cwd(),l)),c.isSrcSubdir(a,l)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&c.isSrcSubdir(l,a)?i(new Error(`Cannot overwrite '${l}' with '${a}'.`)):function(e,t,r){s.unlink(t,(o=>o?r(o):s.symlink(e,t,r)))}(a,r,i)))):s.symlink(a,r,i))))}(e,t,r,n,i):l.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):l.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`))))}function d(e,t,r,o,n){s.copyFile(t,r,(s=>s?n(s):o.preserveTimestamps?function(e,t,r,s){return function(e){return 0==(128&e)}(e)?function(e,t,r){return p(e,128|t,r)}(r,e,(o=>o?s(o):f(e,t,r,s))):f(e,t,r,s)}(e.mode,t,r,n):p(r,e.mode,n)))}function f(e,t,r,o){!function(e,t,r){s.stat(e,((e,s)=>e?r(e):a(t,s.atime,s.mtime,r)))}(t,r,(t=>t?o(t):p(r,e,o)))}function p(e,t,r){return s.chmod(e,t,r)}function m(e,t,r,o){s.readdir(e,((s,n)=>s?o(s):y(n,e,t,r,o)))}function y(e,t,r,s,n){const i=e.pop();return i?function(e,t,r,s,n,i){const a=o.join(r,t),l=o.join(s,t);c.checkPaths(a,l,"copy",n,((t,o)=>{if(t)return i(t);const{destStat:c}=o;!function(e,t,r,s,o){s.filter?u(h,e,t,r,s,o):h(e,t,r,s,o)}(c,a,l,n,(t=>t?i(t):y(e,r,s,n,i)))}))}(e,i,t,r,s,n):n()}e.exports=function(e,t,r,s){"function"!=typeof r||s?"function"==typeof r&&(r={filter:r}):(s=r,r={}),s=s||function(){},(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),c.checkPaths(e,t,"copy",r,((o,n)=>{if(o)return s(o);const{srcStat:i,destStat:a}=n;c.checkParentPaths(e,i,t,"copy",(o=>o?s(o):r.filter?u(l,a,e,t,r,s):l(a,e,t,r,s)))}))}},6464:(e,t,r)=>{"use strict";const s=r(3451).fromCallback;e.exports={copy:s(r(7189))}},5590:(e,t,r)=>{"use strict";const s=r(3451).fromPromise,o=r(7749),n=r(5622),i=r(1381),a=r(4542),c=s((async function(e){let t;try{t=await o.readdir(e)}catch{return i.mkdirs(e)}return Promise.all(t.map((t=>a.remove(n.join(e,t)))))}));function l(e){let t;try{t=o.readdirSync(e)}catch{return i.mkdirsSync(e)}t.forEach((t=>{t=n.join(e,t),a.removeSync(t)}))}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},6530:(e,t,r)=>{"use strict";const s=r(3451).fromCallback,o=r(5622),n=r(77),i=r(1381);e.exports={createFile:s((function(e,t){function r(){n.writeFile(e,"",(e=>{if(e)return t(e);t()}))}n.stat(e,((s,a)=>{if(!s&&a.isFile())return t();const c=o.dirname(e);n.stat(c,((e,s)=>{if(e)return"ENOENT"===e.code?i.mkdirs(c,(e=>{if(e)return t(e);r()})):t(e);s.isDirectory()?r():n.readdir(c,(e=>{if(e)return t(e)}))}))}))})),createFileSync:function(e){let t;try{t=n.statSync(e)}catch{}if(t&&t.isFile())return;const r=o.dirname(e);try{n.statSync(r).isDirectory()||n.readdirSync(r)}catch(e){if(!e||"ENOENT"!==e.code)throw e;i.mkdirsSync(r)}n.writeFileSync(e,"")}}},1720:(e,t,r)=>{"use strict";const s=r(6530),o=r(4147),n=r(3635);e.exports={createFile:s.createFile,createFileSync:s.createFileSync,ensureFile:s.createFile,ensureFileSync:s.createFileSync,createLink:o.createLink,createLinkSync:o.createLinkSync,ensureLink:o.createLink,ensureLinkSync:o.createLinkSync,createSymlink:n.createSymlink,createSymlinkSync:n.createSymlinkSync,ensureSymlink:n.createSymlink,ensureSymlinkSync:n.createSymlinkSync}},4147:(e,t,r)=>{"use strict";const s=r(3451).fromCallback,o=r(5622),n=r(77),i=r(1381),a=r(9257).pathExists,{areIdentical:c}=r(2733);e.exports={createLink:s((function(e,t,r){function s(e,t){n.link(e,t,(e=>{if(e)return r(e);r(null)}))}n.lstat(t,((l,u)=>{n.lstat(e,((n,l)=>{if(n)return n.message=n.message.replace("lstat","ensureLink"),r(n);if(u&&c(l,u))return r(null);const h=o.dirname(t);a(h,((o,n)=>o?r(o):n?s(e,t):void i.mkdirs(h,(o=>{if(o)return r(o);s(e,t)}))))}))}))})),createLinkSync:function(e,t){let r;try{r=n.lstatSync(t)}catch{}try{const t=n.lstatSync(e);if(r&&c(t,r))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const s=o.dirname(t);return n.existsSync(s)||i.mkdirsSync(s),n.linkSync(e,t)}}},6072:(e,t,r)=>{"use strict";const s=r(5622),o=r(77),n=r(9257).pathExists;e.exports={symlinkPaths:function(e,t,r){if(s.isAbsolute(e))return o.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:e})));{const i=s.dirname(t),a=s.join(i,e);return n(a,((t,n)=>t?r(t):n?r(null,{toCwd:a,toDst:e}):o.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:s.relative(i,e)})))))}},symlinkPathsSync:function(e,t){let r;if(s.isAbsolute(e)){if(r=o.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const n=s.dirname(t),i=s.join(n,e);if(r=o.existsSync(i),r)return{toCwd:i,toDst:e};if(r=o.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:s.relative(n,e)}}}}},9259:(e,t,r)=>{"use strict";const s=r(77);e.exports={symlinkType:function(e,t,r){if(r="function"==typeof t?t:r,t="function"!=typeof t&&t)return r(null,t);s.lstat(e,((e,s)=>{if(e)return r(null,"file");t=s&&s.isDirectory()?"dir":"file",r(null,t)}))},symlinkTypeSync:function(e,t){let r;if(t)return t;try{r=s.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}}},3635:(e,t,r)=>{"use strict";const s=r(3451).fromCallback,o=r(5622),n=r(7749),i=r(1381),a=i.mkdirs,c=i.mkdirsSync,l=r(6072),u=l.symlinkPaths,h=l.symlinkPathsSync,d=r(9259),f=d.symlinkType,p=d.symlinkTypeSync,m=r(9257).pathExists,{areIdentical:y}=r(2733);function g(e,t,r,s){u(e,t,((i,c)=>{if(i)return s(i);e=c.toDst,f(c.toCwd,r,((r,i)=>{if(r)return s(r);const c=o.dirname(t);m(c,((r,o)=>r?s(r):o?n.symlink(e,t,i,s):void a(c,(r=>{if(r)return s(r);n.symlink(e,t,i,s)}))))}))}))}e.exports={createSymlink:s((function(e,t,r,s){s="function"==typeof r?r:s,r="function"!=typeof r&&r,n.lstat(t,((o,i)=>{!o&&i.isSymbolicLink()?Promise.all([n.stat(e),n.stat(t)]).then((([o,n])=>{if(y(o,n))return s(null);g(e,t,r,s)})):g(e,t,r,s)}))})),createSymlinkSync:function(e,t,r){let s;try{s=n.lstatSync(t)}catch{}if(s&&s.isSymbolicLink()){const r=n.statSync(e),s=n.statSync(t);if(y(r,s))return}const i=h(e,t);e=i.toDst,r=p(i.toCwd,r);const a=o.dirname(t);return n.existsSync(a)||c(a),n.symlinkSync(e,t,r)}}},7749:(e,t,r)=>{"use strict";const s=r(3451).fromCallback,o=r(77),n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof o[e]));Object.assign(t,o),n.forEach((e=>{t[e]=s(o[e])})),t.realpath.native=s(o.realpath.native),t.exists=function(e,t){return"function"==typeof t?o.exists(e,t):new Promise((t=>o.exists(e,t)))},t.read=function(e,t,r,s,n,i){return"function"==typeof i?o.read(e,t,r,s,n,i):new Promise(((i,a)=>{o.read(e,t,r,s,n,((e,t,r)=>{if(e)return a(e);i({bytesRead:t,buffer:r})}))}))},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?o.write(e,t,...r):new Promise(((s,n)=>{o.write(e,t,...r,((e,t,r)=>{if(e)return n(e);s({bytesWritten:t,buffer:r})}))}))},"function"==typeof o.writev&&(t.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?o.writev(e,t,...r):new Promise(((s,n)=>{o.writev(e,t,...r,((e,t,r)=>{if(e)return n(e);s({bytesWritten:t,buffers:r})}))}))})},5674:(e,t,r)=>{"use strict";e.exports={...r(7749),...r(8690),...r(6464),...r(5590),...r(1720),...r(6573),...r(1381),...r(4026),...r(530),...r(1315),...r(9257),...r(4542)}},6573:(e,t,r)=>{"use strict";const s=r(3451).fromPromise,o=r(7183);o.outputJson=s(r(3508)),o.outputJsonSync=r(9578),o.outputJSON=o.outputJson,o.outputJSONSync=o.outputJsonSync,o.writeJSON=o.writeJson,o.writeJSONSync=o.writeJsonSync,o.readJSON=o.readJson,o.readJSONSync=o.readJsonSync,e.exports=o},7183:(e,t,r)=>{"use strict";const s=r(771);e.exports={readJson:s.readFile,readJsonSync:s.readFileSync,writeJson:s.writeFile,writeJsonSync:s.writeFileSync}},9578:(e,t,r)=>{"use strict";const{stringify:s}=r(4611),{outputFileSync:o}=r(1315);e.exports=function(e,t,r){const n=s(t,r);o(e,n,r)}},3508:(e,t,r)=>{"use strict";const{stringify:s}=r(4611),{outputFile:o}=r(1315);e.exports=async function(e,t,r={}){const n=s(t,r);await o(e,n,r)}},1381:(e,t,r)=>{"use strict";const s=r(3451).fromPromise,{makeDir:o,makeDirSync:n}=r(8233),i=s(o);e.exports={mkdirs:i,mkdirsSync:n,mkdirp:i,mkdirpSync:n,ensureDir:i,ensureDirSync:n}},8233:(e,t,r)=>{"use strict";const s=r(7749),{checkPath:o}=r(3468),n=e=>"number"==typeof e?e:{mode:511,...e}.mode;e.exports.makeDir=async(e,t)=>(o(e),s.mkdir(e,{mode:n(t),recursive:!0})),e.exports.makeDirSync=(e,t)=>(o(e),s.mkdirSync(e,{mode:n(t),recursive:!0}))},3468:(e,t,r)=>{"use strict";const s=r(5622);e.exports.checkPath=function(e){if("win32"===process.platform&&/[<>:"|?*]/.test(e.replace(s.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},4026:(e,t,r)=>{"use strict";e.exports={moveSync:r(6006)}},6006:(e,t,r)=>{"use strict";const s=r(77),o=r(5622),n=r(8690).copySync,i=r(4542).removeSync,a=r(1381).mkdirpSync,c=r(2733);function l(e,t,r){try{s.renameSync(e,t)}catch(s){if("EXDEV"!==s.code)throw s;return function(e,t,r){return n(e,t,{overwrite:r,errorOnExist:!0}),i(e)}(e,t,r)}}e.exports=function(e,t,r){const n=(r=r||{}).overwrite||r.clobber||!1,{srcStat:u,isChangingCase:h=!1}=c.checkPathsSync(e,t,"move",r);return c.checkParentPathsSync(e,u,t,"move"),function(e){const t=o.dirname(e);return o.parse(t).root===t}(t)||a(o.dirname(t)),function(e,t,r,o){if(o)return l(e,t,r);if(r)return i(t),l(e,t,r);if(s.existsSync(t))throw new Error("dest already exists.");return l(e,t,r)}(e,t,n,h)}},530:(e,t,r)=>{"use strict";const s=r(3451).fromCallback;e.exports={move:s(r(436))}},436:(e,t,r)=>{"use strict";const s=r(77),o=r(5622),n=r(6464).copy,i=r(4542).remove,a=r(1381).mkdirp,c=r(9257).pathExists,l=r(2733);function u(e,t,r,s,o){return s?h(e,t,r,o):r?i(t,(s=>s?o(s):h(e,t,r,o))):void c(t,((s,n)=>s?o(s):n?o(new Error("dest already exists.")):h(e,t,r,o)))}function h(e,t,r,o){s.rename(e,t,(s=>s?"EXDEV"!==s.code?o(s):function(e,t,r,s){n(e,t,{overwrite:r,errorOnExist:!0},(t=>t?s(t):i(e,s)))}(e,t,r,o):o()))}e.exports=function(e,t,r,s){"function"==typeof r&&(s=r,r={});const n=r.overwrite||r.clobber||!1;l.checkPaths(e,t,"move",r,((r,i)=>{if(r)return s(r);const{srcStat:c,isChangingCase:h=!1}=i;l.checkParentPaths(e,c,t,"move",(r=>r?s(r):function(e){const t=o.dirname(e);return o.parse(t).root===t}(t)?u(e,t,n,h,s):void a(o.dirname(t),(r=>r?s(r):u(e,t,n,h,s)))))}))}},1315:(e,t,r)=>{"use strict";const s=r(3451).fromCallback,o=r(77),n=r(5622),i=r(1381),a=r(9257).pathExists;e.exports={outputFile:s((function(e,t,r,s){"function"==typeof r&&(s=r,r="utf8");const c=n.dirname(e);a(c,((n,a)=>n?s(n):a?o.writeFile(e,t,r,s):void i.mkdirs(c,(n=>{if(n)return s(n);o.writeFile(e,t,r,s)}))))})),outputFileSync:function(e,...t){const r=n.dirname(e);if(o.existsSync(r))return o.writeFileSync(e,...t);i.mkdirsSync(r),o.writeFileSync(e,...t)}}},9257:(e,t,r)=>{"use strict";const s=r(3451).fromPromise,o=r(7749);e.exports={pathExists:s((function(e){return o.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:o.existsSync}},4542:(e,t,r)=>{"use strict";const s=r(77),o=r(3451).fromCallback,n=r(3456);e.exports={remove:o((function(e,t){if(s.rm)return s.rm(e,{recursive:!0,force:!0},t);n(e,t)})),removeSync:function(e){if(s.rmSync)return s.rmSync(e,{recursive:!0,force:!0});n.sync(e)}}},3456:(e,t,r)=>{"use strict";const s=r(77),o=r(5622),n=r(2357),i="win32"===process.platform;function a(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||s[t],e[t+="Sync"]=e[t]||s[t]})),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,r){let s=0;"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.strictEqual(typeof e,"string","rimraf: path should be a string"),n.strictEqual(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.strictEqual(typeof t,"object","rimraf: options should be object"),a(t),l(e,t,(function o(n){if(n){if(("EBUSY"===n.code||"ENOTEMPTY"===n.code||"EPERM"===n.code)&&s<t.maxBusyTries)return s++,setTimeout((()=>l(e,t,o)),100*s);"ENOENT"===n.code&&(n=null)}r(n)}))}function l(e,t,r){n(e),n(t),n("function"==typeof r),t.lstat(e,((s,o)=>s&&"ENOENT"===s.code?r(null):s&&"EPERM"===s.code&&i?u(e,t,s,r):o&&o.isDirectory()?d(e,t,s,r):void t.unlink(e,(s=>{if(s){if("ENOENT"===s.code)return r(null);if("EPERM"===s.code)return i?u(e,t,s,r):d(e,t,s,r);if("EISDIR"===s.code)return d(e,t,s,r)}return r(s)}))))}function u(e,t,r,s){n(e),n(t),n("function"==typeof s),t.chmod(e,438,(o=>{o?s("ENOENT"===o.code?null:r):t.stat(e,((o,n)=>{o?s("ENOENT"===o.code?null:r):n.isDirectory()?d(e,t,r,s):t.unlink(e,s)}))}))}function h(e,t,r){let s;n(e),n(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}try{s=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}s.isDirectory()?p(e,t,r):t.unlinkSync(e)}function d(e,t,r,s){n(e),n(t),n("function"==typeof s),t.rmdir(e,(i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?s(r):s(i):function(e,t,r){n(e),n(t),n("function"==typeof r),t.readdir(e,((s,n)=>{if(s)return r(s);let i,a=n.length;if(0===a)return t.rmdir(e,r);n.forEach((s=>{c(o.join(e,s),t,(s=>{if(!i)return s?r(i=s):void(0==--a&&t.rmdir(e,r))}))}))}))}(e,t,s)}))}function f(e,t){let r;a(t=t||{}),n(e,"rimraf: missing path"),n.strictEqual(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&i&&h(e,t,r)}try{r&&r.isDirectory()?p(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return i?h(e,t,r):p(e,t,r);if("EISDIR"!==r.code)throw r;p(e,t,r)}}function p(e,t,r){n(e),n(t);try{t.rmdirSync(e)}catch(s){if("ENOTDIR"===s.code)throw r;if("ENOTEMPTY"===s.code||"EEXIST"===s.code||"EPERM"===s.code)!function(e,t){if(n(e),n(t),t.readdirSync(e).forEach((r=>f(o.join(e,r),t))),!i)return t.rmdirSync(e,t);{const r=Date.now();do{try{return t.rmdirSync(e,t)}catch{}}while(Date.now()-r<500)}}(e,t);else if("ENOENT"!==s.code)throw s}}e.exports=c,c.sync=f},2733:(e,t,r)=>{"use strict";const s=r(7749),o=r(5622),n=r(1669);function i(e,t,r){const o=r.dereference?e=>s.stat(e,{bigint:!0}):e=>s.lstat(e,{bigint:!0});return Promise.all([o(e),o(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}function a(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function c(e,t){const r=o.resolve(e).split(o.sep).filter((e=>e)),s=o.resolve(t).split(o.sep).filter((e=>e));return r.reduce(((e,t,r)=>e&&s[r]===t),!0)}function l(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:function(e,t,r,s,u){n.callbackify(i)(e,t,s,((s,n)=>{if(s)return u(s);const{srcStat:i,destStat:h}=n;if(h){if(a(i,h)){const s=o.basename(e),n=o.basename(t);return"move"===r&&s!==n&&s.toLowerCase()===n.toLowerCase()?u(null,{srcStat:i,destStat:h,isChangingCase:!0}):u(new Error("Source and destination must not be the same."))}if(i.isDirectory()&&!h.isDirectory())return u(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!i.isDirectory()&&h.isDirectory())return u(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return i.isDirectory()&&c(e,t)?u(new Error(l(e,t,r))):u(null,{srcStat:i,destStat:h})}))},checkPathsSync:function(e,t,r,n){const{srcStat:i,destStat:u}=function(e,t,r){let o;const n=r.dereference?e=>s.statSync(e,{bigint:!0}):e=>s.lstatSync(e,{bigint:!0}),i=n(e);try{o=n(t)}catch(e){if("ENOENT"===e.code)return{srcStat:i,destStat:null};throw e}return{srcStat:i,destStat:o}}(e,t,n);if(u){if(a(i,u)){const s=o.basename(e),n=o.basename(t);if("move"===r&&s!==n&&s.toLowerCase()===n.toLowerCase())return{srcStat:i,destStat:u,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!u.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&u.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&c(e,t))throw new Error(l(e,t,r));return{srcStat:i,destStat:u}},checkParentPaths:function e(t,r,n,i,c){const u=o.resolve(o.dirname(t)),h=o.resolve(o.dirname(n));if(h===u||h===o.parse(h).root)return c();s.stat(h,{bigint:!0},((s,o)=>s?"ENOENT"===s.code?c():c(s):a(r,o)?c(new Error(l(t,n,i))):e(t,r,h,i,c)))},checkParentPathsSync:function e(t,r,n,i){const c=o.resolve(o.dirname(t)),u=o.resolve(o.dirname(n));if(u===c||u===o.parse(u).root)return;let h;try{h=s.statSync(u,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(a(r,h))throw new Error(l(t,n,i));return e(t,r,u,i)},isSrcSubdir:c,areIdentical:a}},318:(e,t,r)=>{"use strict";const s=r(77);e.exports={utimesMillis:function(e,t,r,o){s.open(e,"r+",((e,n)=>{if(e)return o(e);s.futimes(n,t,r,(e=>{s.close(n,(t=>{o&&o(e||t)}))}))}))},utimesMillisSync:function(e,t,r){const o=s.openSync(e,"r+");return s.futimesSync(o,t,r),s.closeSync(o)}}},771:(e,t,r)=>{let s;try{s=r(77)}catch(e){s=r(5747)}const o=r(3451),{stringify:n,stripBom:i}=r(4611),a={readFile:o.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||s,n=!("throws"in t)||t.throws;let a,c=await o.fromCallback(r.readFile)(e,t);c=i(c);try{a=JSON.parse(c,t?t.reviver:null)}catch(t){if(n)throw t.message=`${e}: ${t.message}`,t;return null}return a})),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||s,o=!("throws"in t)||t.throws;try{let s=r.readFileSync(e,t);return s=i(s),JSON.parse(s,t.reviver)}catch(t){if(o)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:o.fromPromise((async function(e,t,r={}){const i=r.fs||s,a=n(t,r);await o.fromCallback(i.writeFile)(e,a,r)})),writeFileSync:function(e,t,r={}){const o=r.fs||s,i=n(t,r);return o.writeFileSync(e,i,r)}};e.exports=a},4611:e=>{e.exports={stringify:function(e,{EOL:t="\n",finalEOL:r=!0,replacer:s=null,spaces:o}={}){const n=r?t:"";return JSON.stringify(e,s,o).replace(/\n/g,t)+n},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},3451:(e,t)=>{"use strict";t.fromCallback=function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise(((r,s)=>{e.call(this,...t,((e,t)=>null!=e?s(e):r(t)))}));e.apply(this,t)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(...t){const r=t[t.length-1];if("function"!=typeof r)return e.apply(this,t);e.apply(this,t.slice(0,-1)).then((e=>r(null,e)),r)}),"name",{value:e.name})}},5105:(e,t,r)=>{"use strict";const{PassThrough:s}=r(2413);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const o="buffer"===r;let n=!1;t?n=!(r||o):r=r||"utf8",o&&(r=null);const i=new s({objectMode:n});r&&i.setEncoding(r);let a=0;const c=[];return i.on("data",(e=>{c.push(e),n?a=c.length:a+=e.length})),i.getBufferedValue=()=>t?c:o?Buffer.concat(c,a):c.join(""),i.getBufferedLength=()=>a,i}},31:(e,t,r)=>{"use strict";const{constants:s}=r(4293),o=r(4286),n=r(5105);class i extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function a(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};const{maxBuffer:r}=t;let a;return await new Promise(((c,l)=>{const u=e=>{e&&a.getBufferedLength()<=s.MAX_LENGTH&&(e.bufferedData=a.getBufferedValue()),l(e)};a=o(e,n(t),(e=>{e?u(e):c()})),a.on("data",(()=>{a.getBufferedLength()>r&&u(new i)}))})),a.getBufferedValue()}e.exports=a,e.exports.default=a,e.exports.buffer=(e,t)=>a(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>a(e,{...t,array:!0}),e.exports.MaxBufferError=i},6133:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(2337);t.default=function(e,...t){const r=(async()=>{if(e instanceof s.RequestError)try{for(const r of t)if(r)for(const t of r)e=await t(e)}catch(t){e=t}throw e})(),o=()=>r;return r.json=o,r.text=o,r.buffer=o,r.on=o,r}},9291:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const n=r(8614),i=r(657),a=r(341),c=r(2337),l=r(8568),u=r(8178),h=r(4805),d=r(4992),f=r(8141),p=["request","response","redirect","uploadProgress","downloadProgress"];t.default=function e(t){let r,s;const o=new n.EventEmitter,m=new a(((n,a,y)=>{const g=_=>{const w=new u.default(void 0,t);w.retryCount=_,w._noPipe=!0,y((()=>w.destroy())),y.shouldReject=!1,y((()=>a(new c.CancelError(w)))),r=w,w.once("response",(async t=>{var r;if(t.retryCount=_,t.request.aborted)return;let o;try{o=await d.default(w),t.rawBody=o}catch(e){return}if(w._isAboutToError)return;const i=(null!==(r=t.headers["content-encoding"])&&void 0!==r?r:"").toLowerCase(),a=["gzip","deflate","br"].includes(i),{options:h}=w;if(a&&!h.decompress)t.body=o;else try{t.body=l.default(t,h.responseType,h.parseJson,h.encoding)}catch(e){if(t.body=o.toString(),f.isResponseOk(t))return void w._beforeError(e)}try{for(const[r,s]of h.hooks.afterResponse.entries())t=await s(t,(async t=>{const s=u.default.normalizeArguments(void 0,{...t,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},h);s.hooks.afterResponse=s.hooks.afterResponse.slice(0,r);for(const e of s.hooks.beforeRetry)await e(s);const o=e(s);return y((()=>{o.catch((()=>{})),o.cancel()})),o}))}catch(e){return void w._beforeError(new c.RequestError(e.message,e,w))}f.isResponseOk(t)?(s=t,n(w.options.resolveBodyOnly?t.body:t)):w._beforeError(new c.HTTPError(t))}));const b=e=>{if(m.isCanceled)return;const{options:t}=w;if(e instanceof c.HTTPError&&!t.throwHttpErrors){const{response:t}=e;n(w.options.resolveBodyOnly?t.body:t)}else a(e)};w.once("error",b);const v=w.options.body;w.once("retry",((e,t)=>{var r,s;v===(null===(r=t.request)||void 0===r?void 0:r.options.body)&&i.default.nodeStream(null===(s=t.request)||void 0===s?void 0:s.options.body)?b(t):g(e)})),h.default(w,o,p)};g(0)}));m.on=(e,t)=>(o.on(e,t),m);const y=e=>{const t=(async()=>{await m;const{options:t}=s.request;return l.default(s,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(m)),t};return m.json=()=>{const{headers:e}=r.options;return r.writableFinished||void 0!==e.accept||(e.accept="application/json"),y("json")},m.buffer=()=>y("buffer"),m.text=()=>y("text"),m},o(r(2337),t)},7999:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(657);t.default=(e,t)=>{if(s.default.null_(e.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");s.assert.any([s.default.string,s.default.undefined],e.encoding),s.assert.any([s.default.boolean,s.default.undefined],e.resolveBodyOnly),s.assert.any([s.default.boolean,s.default.undefined],e.methodRewriting),s.assert.any([s.default.boolean,s.default.undefined],e.isStream),s.assert.any([s.default.string,s.default.undefined],e.responseType),void 0===e.responseType&&(e.responseType="text");const{retry:r}=e;if(e.retry=t?{...t.retry}:{calculateDelay:e=>e.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},s.default.object(r)?(e.retry={...e.retry,...r},e.retry.methods=[...new Set(e.retry.methods.map((e=>e.toUpperCase())))],e.retry.statusCodes=[...new Set(e.retry.statusCodes)],e.retry.errorCodes=[...new Set(e.retry.errorCodes)]):s.default.number(r)&&(e.retry.limit=r),s.default.undefined(e.retry.maxRetryAfter)&&(e.retry.maxRetryAfter=Math.min(...[e.timeout.request,e.timeout.connect].filter(s.default.number))),s.default.object(e.pagination)){t&&(e.pagination={...t.pagination,...e.pagination});const{pagination:r}=e;if(!s.default.function_(r.transform))throw new Error("`options.pagination.transform` must be implemented");if(!s.default.function_(r.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!s.default.function_(r.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!s.default.function_(r.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return"json"===e.responseType&&void 0===e.headers.accept&&(e.headers.accept="application/json"),e}},8568:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(2337);t.default=(e,t,r,o)=>{const{rawBody:n}=e;try{if("text"===t)return n.toString(o);if("json"===t)return 0===n.length?"":r(n.toString());if("buffer"===t)return n;throw new s.ParseError({message:`Unknown body type '${t}'`,name:"Error"},e)}catch(t){throw new s.ParseError(t,e)}}},2337:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelError=t.ParseError=void 0;const n=r(8178);class i extends n.RequestError{constructor(e,t){const{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError"}}t.ParseError=i;class a extends n.RequestError{constructor(e){super("Promise was canceled",{},e),this.name="CancelError"}get isCanceled(){return!0}}t.CancelError=a,o(r(8178),t)},6582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryAfterStatusCodes=void 0,t.retryAfterStatusCodes=new Set([413,429,503]),t.default=({attemptCount:e,retryOptions:t,error:r,retryAfter:s})=>{if(e>t.limit)return 0;const o=t.methods.includes(r.options.method),n=t.errorCodes.includes(r.code),i=r.response&&t.statusCodes.includes(r.response.statusCode);if(!o||!n&&!i)return 0;if(r.response){if(s)return void 0===t.maxRetryAfter||s>t.maxRetryAfter?0:s;if(413===r.response.statusCode)return 0}return 2**(e-1)*1e3+100*Math.random()}},8178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedProtocolError=t.ReadError=t.TimeoutError=t.UploadError=t.CacheError=t.HTTPError=t.MaxRedirectsError=t.RequestError=t.setNonEnumerableProperties=t.knownHookEvents=t.withoutBody=t.kIsNormalizedAlready=void 0;const s=r(1669),o=r(2413),n=r(5747),i=r(8835),a=r(8605),c=r(8605),l=r(7211),u=r(81),h=r(3266),d=r(3481),f=r(346),p=r(9758),m=r(5989),y=r(657),g=r(2425),_=r(6721),w=r(4805),b=r(4834),v=r(6959),S=r(186),E=r(7440),x=r(4992),k=r(354),O=r(8141),T=r(5241),C=r(7999),P=r(6582);let A;const R=Symbol("request"),N=Symbol("response"),L=Symbol("responseSize"),j=Symbol("downloadedSize"),D=Symbol("bodySize"),I=Symbol("uploadedSize"),M=Symbol("serverResponsesPiped"),U=Symbol("unproxyEvents"),F=Symbol("isFromCache"),q=Symbol("cancelTimeouts"),$=Symbol("startedReading"),H=Symbol("stopReading"),B=Symbol("triggerRead"),W=Symbol("body"),z=Symbol("jobs"),V=Symbol("originalResponse"),G=Symbol("retryTimeout");t.kIsNormalizedAlready=Symbol("isNormalizedAlready");const J=y.default.string(process.versions.brotli);t.withoutBody=new Set(["GET","HEAD"]),t.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];const Y=new E.default,K=new Set([300,301,302,303,304,307,308]),X=["context","body","json","form"];t.setNonEnumerableProperties=(e,t)=>{const r={};for(const t of e)if(t)for(const e of X)e in t&&(r[e]={writable:!0,configurable:!0,enumerable:!1,value:t[e]});Object.defineProperties(t,r)};class Z extends Error{constructor(e,t,r){var s;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code,r instanceof ae?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r[N]}),Object.defineProperty(this,"options",{enumerable:!1,value:r.options})):Object.defineProperty(this,"options",{enumerable:!1,value:r}),this.timings=null===(s=this.request)||void 0===s?void 0:s.timings,y.default.string(t.stack)&&y.default.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length,r=this.stack.slice(e).split("\n").reverse(),s=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;0!==s.length&&s[0]===r[0];)r.shift();this.stack=`${this.stack.slice(0,e)}${r.reverse().join("\n")}${s.reverse().join("\n")}`}}}t.RequestError=Z;class Q extends Z{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError"}}t.MaxRedirectsError=Q;class ee extends Z{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError"}}t.HTTPError=ee;class te extends Z{constructor(e,t){super(e.message,e,t),this.name="CacheError"}}t.CacheError=te;class re extends Z{constructor(e,t){super(e.message,e,t),this.name="UploadError"}}t.UploadError=re;class se extends Z{constructor(e,t,r){super(e.message,e,r),this.name="TimeoutError",this.event=e.event,this.timings=t}}t.TimeoutError=se;class oe extends Z{constructor(e,t){super(e.message,e,t),this.name="ReadError"}}t.ReadError=oe;class ne extends Z{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError"}}t.UnsupportedProtocolError=ne;const ie=["socket","connect","continue","information","upgrade","timeout"];class ae extends o.Duplex{constructor(e,r={},s){super({autoDestroy:!1,highWaterMark:0}),this[j]=0,this[I]=0,this.requestInitialized=!1,this[M]=new Set,this.redirects=[],this[H]=!1,this[B]=!1,this[z]=[],this.retryCount=0,this._progressCallbacks=[];const o=()=>this._unlockWrite(),i=()=>this._lockWrite();this.on("pipe",(e=>{e.prependListener("data",o),e.on("data",i),e.prependListener("end",o),e.on("end",i)})),this.on("unpipe",(e=>{e.off("data",o),e.off("data",i),e.off("end",o),e.off("end",i)})),this.on("pipe",(e=>{e instanceof c.IncomingMessage&&(this.options.headers={...e.headers,...this.options.headers})}));const{json:a,body:l,form:u}=r;if((a||l||u)&&this._lockWrite(),t.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(e,r,s)}catch(e){return y.default.nodeStream(r.body)&&r.body.destroy(),void this.destroy(e)}(async()=>{var e;try{this.options.body instanceof n.ReadStream&&await(async e=>new Promise(((t,r)=>{const s=e=>{r(e)};e.pending||t(),e.once("error",s),e.once("ready",(()=>{e.off("error",s),t()}))})))(this.options.body);const{url:t}=this.options;if(!t)throw new TypeError("Missing `url` property");if(this.requestUrl=t.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed)return void(null===(e=this[R])||void 0===e||e.destroy());for(const e of this[z])e();this[z].length=0,this.requestInitialized=!0}catch(e){if(e instanceof Z)return void this._beforeError(e);this.destroyed||this.destroy(e)}})()}static normalizeArguments(e,r,o){var n,a,c,l,u;const f=r;if(y.default.object(e)&&!y.default.urlInstance(e))r={...o,...e,...r};else{if(e&&r&&void 0!==r.url)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...o,...r},void 0!==e&&(r.url=e),y.default.urlInstance(r.url)&&(r.url=new i.URL(r.url.toString()))}if(!1===r.cache&&(r.cache=void 0),!1===r.dnsCache&&(r.dnsCache=void 0),y.assert.any([y.default.string,y.default.undefined],r.method),y.assert.any([y.default.object,y.default.undefined],r.headers),y.assert.any([y.default.string,y.default.urlInstance,y.default.undefined],r.prefixUrl),y.assert.any([y.default.object,y.default.undefined],r.cookieJar),y.assert.any([y.default.object,y.default.string,y.default.undefined],r.searchParams),y.assert.any([y.default.object,y.default.string,y.default.undefined],r.cache),y.assert.any([y.default.object,y.default.number,y.default.undefined],r.timeout),y.assert.any([y.default.object,y.default.undefined],r.context),y.assert.any([y.default.object,y.default.undefined],r.hooks),y.assert.any([y.default.boolean,y.default.undefined],r.decompress),y.assert.any([y.default.boolean,y.default.undefined],r.ignoreInvalidCookies),y.assert.any([y.default.boolean,y.default.undefined],r.followRedirect),y.assert.any([y.default.number,y.default.undefined],r.maxRedirects),y.assert.any([y.default.boolean,y.default.undefined],r.throwHttpErrors),y.assert.any([y.default.boolean,y.default.undefined],r.http2),y.assert.any([y.default.boolean,y.default.undefined],r.allowGetBody),y.assert.any([y.default.string,y.default.undefined],r.localAddress),y.assert.any([k.isDnsLookupIpVersion,y.default.undefined],r.dnsLookupIpVersion),y.assert.any([y.default.object,y.default.undefined],r.https),y.assert.any([y.default.boolean,y.default.undefined],r.rejectUnauthorized),r.https&&(y.assert.any([y.default.boolean,y.default.undefined],r.https.rejectUnauthorized),y.assert.any([y.default.function_,y.default.undefined],r.https.checkServerIdentity),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.certificateAuthority),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.key),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.certificate),y.assert.any([y.default.string,y.default.undefined],r.https.passphrase),y.assert.any([y.default.string,y.default.buffer,y.default.array,y.default.undefined],r.https.pfx)),y.assert.any([y.default.object,y.default.undefined],r.cacheOptions),y.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===(null==o?void 0:o.headers)?r.headers={...r.headers}:r.headers=m({...null==o?void 0:o.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==(null==o?void 0:o.searchParams)){let e;if(y.default.string(r.searchParams)||r.searchParams instanceof i.URLSearchParams)e=new i.URLSearchParams(r.searchParams);else{!function(e){for(const t in e){const r=e[t];if(!(y.default.string(r)||y.default.number(r)||y.default.boolean(r)||y.default.null_(r)||y.default.undefined(r)))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}(r.searchParams),e=new i.URLSearchParams;for(const t in r.searchParams){const s=r.searchParams[t];null===s?e.append(t,""):void 0!==s&&e.append(t,s)}}null===(n=null==o?void 0:o.searchParams)||void 0===n||n.forEach(((t,r)=>{e.has(r)||e.append(r,t)})),r.searchParams=e}if(r.username=null!==(a=r.username)&&void 0!==a?a:"",r.password=null!==(c=r.password)&&void 0!==c?c:"",y.default.undefined(r.prefixUrl)?r.prefixUrl=null!==(l=null==o?void 0:o.prefixUrl)&&void 0!==l?l:"":(r.prefixUrl=r.prefixUrl.toString(),""===r.prefixUrl||r.prefixUrl.endsWith("/")||(r.prefixUrl+="/")),y.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=S.default(r.prefixUrl+r.url,r)}else(y.default.undefined(r.url)&&""!==r.prefixUrl||r.protocol)&&(r.url=S.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:e}=r;Object.defineProperty(r,"prefixUrl",{set:t=>{const s=r.url;if(!s.href.startsWith(t))throw new Error(`Cannot change \`prefixUrl\` from ${e} to ${t}: ${s.href}`);r.url=new i.URL(t+s.href.slice(e.length)),e=t},get:()=>e});let{protocol:t}=r.url;if("unix:"===t&&(t="http:",r.url=new i.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),"http:"!==t&&"https:"!==t)throw new ne(r);""===r.username?r.username=r.url.username:r.url.username=r.username,""===r.password?r.password=r.url.password:r.url.password=r.password}const{cookieJar:p}=r;if(p){let{setCookie:e,getCookieString:t}=p;y.assert.function_(e),y.assert.function_(t),4===e.length&&0===t.length&&(e=s.promisify(e.bind(r.cookieJar)),t=s.promisify(t.bind(r.cookieJar)),r.cookieJar={setCookie:e,getCookieString:t})}const{cache:g}=r;if(g&&(Y.has(g)||Y.set(g,new d(((e,t)=>{const r=e[R](e,t);return y.default.promise(r)&&(r.once=(e,t)=>{if("error"===e)r.catch(t);else{if("abort"!==e)throw new Error(`Unknown HTTP2 promise event: ${e}`);(async()=>{try{(await r).once("abort",t)}catch(e){}})()}return r}),r}),g))),r.cacheOptions={...r.cacheOptions},!0===r.dnsCache)A||(A=new h.default),r.dnsCache=A;else if(!y.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${y.default(r.dnsCache)}`);y.default.number(r.timeout)?r.timeout={request:r.timeout}:o&&r.timeout!==o.timeout?r.timeout={...o.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});const _=r.hooks===(null==o?void 0:o.hooks);r.hooks={...r.hooks};for(const e of t.knownHookEvents)if(e in r.hooks){if(!y.default.array(r.hooks[e]))throw new TypeError(`Parameter \`${e}\` must be an Array, got ${y.default(r.hooks[e])}`);r.hooks[e]=[...r.hooks[e]]}else r.hooks[e]=[];if(o&&!_)for(const e of t.knownHookEvents)o.hooks[e].length>0&&(r.hooks[e]=[...o.hooks[e],...r.hooks[e]]);if("family"in r&&T.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),(null==o?void 0:o.https)&&(r.https={...o.https,...r.https}),"rejectUnauthorized"in r&&T.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&T.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&T.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&T.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&T.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&T.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&T.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent)for(const e in r.agent)if("http"!==e&&"https"!==e&&"http2"!==e)throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${e}\``);return r.maxRedirects=null!==(u=r.maxRedirects)&&void 0!==u?u:0,t.setNonEnumerableProperties([o,f],r),C.default(r,o)}_lockWrite(){const e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){const{options:e}=this,{headers:r}=e,s=!y.default.undefined(e.form),n=!y.default.undefined(e.json),a=!y.default.undefined(e.body),c=s||n||a,l=t.withoutBody.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=l,c){if(l)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([a,s,n].filter((e=>e)).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(a&&!(e.body instanceof o.Readable)&&!y.default.string(e.body)&&!y.default.buffer(e.body)&&!_.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(s&&!y.default.object(e.form))throw new TypeError("The `form` option must be an Object");{const t=!y.default.string(r["content-type"]);a?(_.default(e.body)&&t&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`),this[W]=e.body):s?(t&&(r["content-type"]="application/x-www-form-urlencoded"),this[W]=new i.URLSearchParams(e.form).toString()):(t&&(r["content-type"]="application/json"),this[W]=e.stringifyJson(e.json));const o=await g.default(this[W],e.headers);y.default.undefined(r["content-length"])&&y.default.undefined(r["transfer-encoding"])&&(l||y.default.undefined(o)||(r["content-length"]=String(o)))}}else l?this._lockWrite():this._unlockWrite();this[D]=Number(r["content-length"])||void 0}async _onResponseBase(e){const{options:t}=this,{url:r}=t;this[V]=e,t.decompress&&(e=f(e));const s=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:a.STATUS_CODES[s],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[F]=o.isFromCache,this[L]=Number(e.headers["content-length"])||void 0,this[N]=e,e.once("end",(()=>{this[L]=this[j],this.emit("downloadProgress",this.downloadProgress)})),e.once("error",(t=>{e.destroy(),this._beforeError(new oe(t,this))})),e.once("aborted",(()=>{this._beforeError(new oe({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))})),this.emit("downloadProgress",this.downloadProgress);const n=e.headers["set-cookie"];if(y.default.object(t.cookieJar)&&n){let e=n.map((async e=>t.cookieJar.setCookie(e,r.toString())));t.ignoreInvalidCookies&&(e=e.map((async e=>e.catch((()=>{})))));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(t.followRedirect&&e.headers.location&&K.has(s)){if(e.resume(),this[R]&&(this[q](),delete this[R],this[U]()),!(303===s&&"GET"!==t.method&&"HEAD"!==t.method)&&t.methodRewriting||(t.method="GET","body"in t&&delete t.body,"json"in t&&delete t.json,"form"in t&&delete t.form,this[W]=void 0,delete t.headers["content-length"]),this.redirects.length>=t.maxRedirects)return void this._beforeError(new Q(this));try{const s=Buffer.from(e.headers.location,"binary").toString(),n=new i.URL(s,r),a=n.toString();decodeURI(a),n.hostname!==r.hostname||n.port!==r.port?("host"in t.headers&&delete t.headers.host,"cookie"in t.headers&&delete t.headers.cookie,"authorization"in t.headers&&delete t.headers.authorization,(t.username||t.password)&&(t.username="",t.password="")):(n.username=t.username,n.password=t.password),this.redirects.push(a),t.url=n;for(const e of t.hooks.beforeRedirect)await e(t,o);this.emit("redirect",o,t),await this._makeRequest()}catch(e){return void this._beforeError(e)}}else if(t.isStream&&t.throwHttpErrors&&!O.isResponseOk(o))this._beforeError(new ee(o));else{e.on("readable",(()=>{this[B]&&this._read()})),this.on("resume",(()=>{e.resume()})),this.on("pause",(()=>{e.pause()})),e.once("end",(()=>{this.push(null)})),this.emit("response",e);for(const r of this[M])if(!r.headersSent){for(const s in e.headers){const o=!t.decompress||"content-encoding"!==s,n=e.headers[s];o&&r.setHeader(s,n)}r.statusCode=s}}}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:r,url:s}=t;u.default(e),this[q]=b.default(e,r,s);const o=t.cache?"cacheableResponse":"response";e.once(o,(e=>{this._onResponse(e)})),e.once("error",(t=>{var r;e.destroy(),null===(r=e.res)||void 0===r||r.removeAllListeners("end"),t=t instanceof b.TimeoutError?new se(t,this.timings,this):new Z(t.message,t,this),this._beforeError(t)})),this[U]=w.default(e,this,ie),this[R]=e,this.emit("uploadProgress",this.uploadProgress);const n=this[W],i=0===this.redirects.length?this:e;y.default.nodeStream(n)?(n.pipe(i),n.once("error",(e=>{this._beforeError(new re(e,this))}))):(this._unlockWrite(),y.default.undefined(n)?(this._cannotHaveBody||this._noPipe)&&(i.end(),this._lockWrite()):(this._writeRequest(n,void 0,(()=>{})),i.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,t){return new Promise(((r,s)=>{let o;Object.assign(t,v.default(e)),delete t.url;const n=Y.get(t.cache)(t,(async e=>{e._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",e),r(e)}));t.url=e,n.once("error",s),n.once("request",(async e=>{o=e,r(o)}))}))}async _makeRequest(){var e,t,r,s,o;const{options:n}=this,{headers:i}=n;for(const e in i)if(y.default.undefined(i[e]))delete i[e];else if(y.default.null_(i[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(n.decompress&&y.default.undefined(i["accept-encoding"])&&(i["accept-encoding"]=J?"gzip, deflate, br":"gzip, deflate"),n.cookieJar){const e=await n.cookieJar.getCookieString(n.url.toString());y.default.nonEmptyString(e)&&(n.headers.cookie=e)}for(const e of n.hooks.beforeRequest){const t=await e(n);if(!y.default.undefined(t)){n.request=()=>t;break}}n.body&&this[W]!==n.body&&(this[W]=n.body);const{agent:c,request:u,timeout:h,url:f}=n;if(n.dnsCache&&!("lookup"in n)&&(n.lookup=n.dnsCache.lookup),"unix"===f.hostname){const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${f.pathname}${f.search}`);if(null==e?void 0:e.groups){const{socketPath:t,path:r}=e.groups;Object.assign(n,{socketPath:t,path:r,host:""})}}const m="https:"===f.protocol;let g;g=n.http2?p.auto:m?l.request:a.request;const _=null!==(e=n.request)&&void 0!==e?e:g,w=n.cache?this._createCacheableRequest:_;c&&!n.http2&&(n.agent=c[m?"https":"http"]),n[R]=_,delete n.request,delete n.timeout;const b=n;if(b.shared=null===(t=n.cacheOptions)||void 0===t?void 0:t.shared,b.cacheHeuristic=null===(r=n.cacheOptions)||void 0===r?void 0:r.cacheHeuristic,b.immutableMinTimeToLive=null===(s=n.cacheOptions)||void 0===s?void 0:s.immutableMinTimeToLive,b.ignoreCargoCult=null===(o=n.cacheOptions)||void 0===o?void 0:o.ignoreCargoCult,void 0!==n.dnsLookupIpVersion)try{b.family=k.dnsLookupIpVersionToFamily(n.dnsLookupIpVersion)}catch(e){throw new Error("Invalid `dnsLookupIpVersion` option value")}n.https&&("rejectUnauthorized"in n.https&&(b.rejectUnauthorized=n.https.rejectUnauthorized),n.https.checkServerIdentity&&(b.checkServerIdentity=n.https.checkServerIdentity),n.https.certificateAuthority&&(b.ca=n.https.certificateAuthority),n.https.certificate&&(b.cert=n.https.certificate),n.https.key&&(b.key=n.https.key),n.https.passphrase&&(b.passphrase=n.https.passphrase),n.https.pfx&&(b.pfx=n.https.pfx));try{let e=await w(f,b);y.default.undefined(e)&&(e=g(f,b)),n.request=u,n.timeout=h,n.agent=c,n.https&&("rejectUnauthorized"in n.https&&delete b.rejectUnauthorized,n.https.checkServerIdentity&&delete b.checkServerIdentity,n.https.certificateAuthority&&delete b.ca,n.https.certificate&&delete b.cert,n.https.key&&delete b.key,n.https.passphrase&&delete b.passphrase,n.https.pfx&&delete b.pfx),v=e,y.default.object(v)&&!("statusCode"in v)?this._onRequest(e):this.writable?(this.once("finish",(()=>{this._onResponse(e)})),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(e)}catch(e){if(e instanceof d.CacheError)throw new te(e,this);throw new Z(e.message,e,this)}var v}async _error(e){try{for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new Z(t.message,t,this)}this.destroy(e)}_beforeError(e){if(this[H])return;const{options:t}=this,r=this.retryCount+1;this[H]=!0,e instanceof Z||(e=new Z(e.message,e,this));const s=e,{response:o}=s;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await x.default(o),o.body=o.rawBody.toString()}catch(e){}}if(0!==this.listenerCount("retry")){let n;try{let e;o&&"retry-after"in o.headers&&(e=Number(o.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(o.headers["retry-after"])-Date.now(),e<=0&&(e=1)):e*=1e3),n=await t.retry.calculateDelay({attemptCount:r,retryOptions:t.retry,error:s,retryAfter:e,computedValue:P.default({attemptCount:r,retryOptions:t.retry,error:s,retryAfter:e,computedValue:0})})}catch(e){return void this._error(new Z(e.message,e,this))}if(n){const t=async()=>{try{for(const e of this.options.hooks.beforeRetry)await e(this.options,s,r)}catch(t){return void this._error(new Z(t.message,e,this))}this.destroyed||(this.destroy(),this.emit("retry",r,e))};return void(this[G]=setTimeout(t,n))}}this._error(s)})()}_read(){this[B]=!0;const e=this[N];if(e&&!this[H]){let t;for(e.readableLength&&(this[B]=!1);null!==(t=e.read());){this[j]+=t.length,this[$]=!0;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,r){const s=()=>{this._writeRequest(e,t,r)};this.requestInitialized?s():this[z].push(s)}_writeRequest(e,t,r){this[R].destroyed||(this._progressCallbacks.push((()=>{this[I]+=Buffer.byteLength(e,t);const r=this.uploadProgress;r.percent<1&&this.emit("uploadProgress",r)})),this[R].write(e,t,(e=>{!e&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),r(e)})))}_final(e){const t=()=>{for(;0!==this._progressCallbacks.length;)this._progressCallbacks.shift()();R in this?this[R].destroyed?e():this[R].end((t=>{t||(this[D]=this[I],this.emit("uploadProgress",this.uploadProgress),this[R].emit("upload-complete")),e(t)})):e()};this.requestInitialized?t():this[z].push(t)}_destroy(e,t){var r;this[H]=!0,clearTimeout(this[G]),R in this&&(this[q](),(null===(r=this[N])||void 0===r?void 0:r.complete)||this[R].destroy()),null===e||y.default.undefined(e)||e instanceof Z||(e=new Z(e.message,e,this)),t(e)}get _isAboutToError(){return this[H]}get ip(){var e;return null===(e=this.socket)||void 0===e?void 0:e.remoteAddress}get aborted(){var e,t,r;return(null!==(t=null===(e=this[R])||void 0===e?void 0:e.destroyed)&&void 0!==t?t:this.destroyed)&&!(null===(r=this[V])||void 0===r?void 0:r.complete)}get socket(){var e,t;return null!==(t=null===(e=this[R])||void 0===e?void 0:e.socket)&&void 0!==t?t:void 0}get downloadProgress(){let e;return e=this[L]?this[j]/this[L]:this[L]===this[j]?1:0,{percent:e,transferred:this[j],total:this[L]}}get uploadProgress(){let e;return e=this[D]?this[I]/this[D]:this[D]===this[I]?1:0,{percent:e,transferred:this[I],total:this[D]}}get timings(){var e;return null===(e=this[R])||void 0===e?void 0:e.timings}get isFromCache(){return this[F]}pipe(e,t){if(this[$])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof c.ServerResponse&&this[M].add(e),super.pipe(e,t)}unpipe(e){return e instanceof c.ServerResponse&&this[M].delete(e),super.unpipe(e),this}}t.default=ae},354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dnsLookupIpVersionToFamily=t.isDnsLookupIpVersion=void 0;const r={auto:0,ipv4:4,ipv6:6};t.isDnsLookupIpVersion=e=>e in r,t.dnsLookupIpVersionToFamily=e=>{if(t.isDnsLookupIpVersion(e))return r[e];throw new Error("Invalid DNS lookup IP version")}},2425:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(5747),o=r(1669),n=r(657),i=r(6721),a=o.promisify(s.stat);t.default=async(e,t)=>{if(t&&"content-length"in t)return Number(t["content-length"]);if(!e)return 0;if(n.default.string(e))return Buffer.byteLength(e);if(n.default.buffer(e))return e.length;if(i.default(e))return o.promisify(e.getLength.bind(e))();if(e instanceof s.ReadStream){const{size:t}=await a(e.path);if(0===t)return;return t}}},4992:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async e=>{const t=[];let r=0;for await(const s of e)t.push(s),r+=Buffer.byteLength(s);return Buffer.isBuffer(t[0])?Buffer.concat(t,r):Buffer.from(t.join(""))}},6721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(657);t.default=e=>s.default.nodeStream(e)&&s.default.function_(e.getBoundary)},8141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResponseOk=void 0,t.isResponseOk=e=>{const{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||304===t}},186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(8835),o=["protocol","host","hostname","port","pathname","search"];t.default=(e,t)=>{var r,n;if(t.path){if(t.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(t.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(t.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(t.search&&t.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!e){if(!t.protocol)throw new TypeError("No URL protocol specified");e=`${t.protocol}//${null!==(n=null!==(r=t.hostname)&&void 0!==r?r:t.host)&&void 0!==n?n:""}`}const i=new s.URL(e);if(t.path){const e=t.path.indexOf("?");-1===e?t.pathname=t.path:(t.pathname=t.path.slice(0,e),t.search=t.path.slice(e+1)),delete t.path}for(const e of o)t[e]&&(i[e]=t[e].toString());return i}},4805:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){const s={};for(const o of r)s[o]=(...e)=>{t.emit(o,...e)},e.on(o,s[o]);return()=>{for(const t of r)e.off(t,s[t])}}},4834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutError=void 0;const s=r(1631),o=r(8535),n=Symbol("reentry"),i=()=>{};class a extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),this.event=t,this.name="TimeoutError",this.code="ETIMEDOUT"}}t.TimeoutError=a,t.default=(e,t,r)=>{if(n in e)return i;e[n]=!0;const c=[],{once:l,unhandleAll:u}=o.default(),h=(e,t,r)=>{var s;const o=setTimeout(t,e,e,r);null===(s=o.unref)||void 0===s||s.call(o);const n=()=>{clearTimeout(o)};return c.push(n),n},{host:d,hostname:f}=r,p=(t,r)=>{e.destroy(new a(t,r))},m=()=>{for(const e of c)e();u()};if(e.once("error",(t=>{if(m(),0===e.listenerCount("error"))throw t})),e.once("close",m),l(e,"response",(e=>{l(e,"end",m)})),void 0!==t.request&&h(t.request,p,"request"),void 0!==t.socket){const r=()=>{p(t.socket,"socket")};e.setTimeout(t.socket,r),c.push((()=>{e.removeListener("timeout",r)}))}return l(e,"socket",(o=>{var n;const{socketPath:i}=e;if(o.connecting){const e=Boolean(null!=i?i:0!==s.isIP(null!==(n=null!=f?f:d)&&void 0!==n?n:""));if(void 0!==t.lookup&&!e&&void 0===o.address().address){const e=h(t.lookup,p,"lookup");l(o,"lookup",e)}if(void 0!==t.connect){const r=()=>h(t.connect,p,"connect");e?l(o,"connect",r()):l(o,"lookup",(e=>{null===e&&l(o,"connect",r())}))}void 0!==t.secureConnect&&"https:"===r.protocol&&l(o,"connect",(()=>{const e=h(t.secureConnect,p,"secureConnect");l(o,"secureConnect",e)}))}if(void 0!==t.send){const r=()=>h(t.send,p,"send");o.connecting?l(o,"connect",(()=>{l(e,"upload-complete",r())})):l(e,"upload-complete",r())}})),void 0!==t.response&&l(e,"upload-complete",(()=>{const r=h(t.response,p,"response");l(e,"response",r)})),m}},8535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>{const e=[];return{once(t,r,s){t.once(r,s),e.push({origin:t,event:r,fn:s})},unhandleAll(){for(const t of e){const{origin:e,event:r,fn:s}=t;e.removeListener(r,s)}e.length=0}}}},6959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(657);t.default=e=>{const t={protocol:(e=e).protocol,hostname:s.default.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return s.default.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}},7440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}}},6427:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultHandler=void 0;const n=r(657),i=r(9291),a=r(6133),c=r(8178),l=r(4638),u={RequestError:i.RequestError,CacheError:i.CacheError,ReadError:i.ReadError,HTTPError:i.HTTPError,MaxRedirectsError:i.MaxRedirectsError,TimeoutError:i.TimeoutError,ParseError:i.ParseError,CancelError:i.CancelError,UnsupportedProtocolError:i.UnsupportedProtocolError,UploadError:i.UploadError},h=async e=>new Promise((t=>{setTimeout(t,e)})),{normalizeArguments:d}=c.default,f=(...e)=>{let t;for(const r of e)t=d(void 0,r,t);return t},p=e=>e.isStream?new c.default(void 0,e):i.default(e),m=e=>"defaults"in e&&"options"in e.defaults,y=["get","post","put","patch","head","delete"];t.defaultHandler=(e,t)=>t(e);const g=(e,t)=>{if(e)for(const r of e)r(t)},_=e=>{e._rawHandlers=e.handlers,e.handlers=e.handlers.map((e=>(t,r)=>{let s;const o=e(t,(e=>(s=r(e),s)));if(o!==s&&!t.isStream&&s){const e=o,{then:t,catch:r,finally:n}=e;Object.setPrototypeOf(e,Object.getPrototypeOf(s)),Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)),e.then=t,e.catch=r,e.finally=n}return o}));const r=(t,r={},s)=>{var o,l;let u=0;const h=t=>e.handlers[u++](t,u===e.handlers.length?p:h);if(n.default.plainObject(t)){const e={...t,...r};c.setNonEnumerableProperties([t,r],e),r=e,t=void 0}try{let n;try{g(e.options.hooks.init,r),g(null===(o=r.hooks)||void 0===o?void 0:o.init,r)}catch(e){n=e}const a=d(t,r,null!=s?s:e.options);if(a[c.kIsNormalizedAlready]=!0,n)throw new i.RequestError(n.message,n,a);return h(a)}catch(t){if(r.isStream)throw t;return a.default(t,e.options.hooks.beforeError,null===(l=r.hooks)||void 0===l?void 0:l.beforeError)}};r.extend=(...r)=>{const s=[e.options];let o,n=[...e._rawHandlers];for(const e of r)m(e)?(s.push(e.defaults.options),n.push(...e.defaults._rawHandlers),o=e.defaults.mutableDefaults):(s.push(e),"handlers"in e&&n.push(...e.handlers),o=e.mutableDefaults);return n=n.filter((e=>e!==t.defaultHandler)),0===n.length&&n.push(t.defaultHandler),_({options:f(...s),handlers:n,mutableDefaults:Boolean(o)})};const s=async function*(t,s){let o=d(t,s,e.options);o.resolveBodyOnly=!1;const i=o.pagination;if(!n.default.object(i))throw new TypeError("`options.pagination` must be implemented");const a=[];let{countLimit:c}=i,l=0;for(;l<i.requestLimit;){0!==l&&await h(i.backoff);const e=await r(void 0,void 0,o),t=await i.transform(e),s=[];for(const e of t)if(i.filter(e,a,s)){if(!i.shouldContinue(e,a,s))return;if(yield e,i.stackAllItems&&a.push(e),s.push(e),--c<=0)return}const n=i.paginate(e,a,s);if(!1===n)return;n===e.request.options?o=e.request.options:void 0!==n&&(o=d(void 0,n,o)),l++}};(r.paginate=s).all=async(e,t)=>{const r=[];for await(const o of s(e,t))r.push(o);return r},r.paginate.each=s,r.stream=(e,t)=>r(e,{...t,isStream:!0});for(const e of y)r[e]=(t,s)=>r(t,{...s,method:e}),r.stream[e]=(t,s)=>r(t,{...s,method:e,isStream:!0});return Object.assign(r,u),Object.defineProperty(r,"defaults",{value:e.mutableDefaults?e:l.default(e),writable:e.mutableDefaults,configurable:e.mutableDefaults,enumerable:!0}),r.mergeOptions=f,r};t.default=_,o(r(8317),t)},2210:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const n=r(8835),i=r(6427),a={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate:e=>{if(!Reflect.has(e.headers,"link"))return!1;const t=e.headers.link.split(",");let r;for(const e of t){const t=e.split(";");if(t[1].includes("next")){r=t[0].trimStart().trim(),r=r.slice(1,-1);break}}return!!r&&{url:new n.URL(r)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:e=>JSON.parse(e),stringifyJson:e=>JSON.stringify(e),cacheOptions:{}},handlers:[i.defaultHandler],mutableDefaults:!1},c=i.default(a);t.default=c,e.exports=c,e.exports.default=c,e.exports.__esModule=!0,o(r(6427),t),o(r(9291),t)},8317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(657);t.default=function e(t){for(const r of Object.values(t))(s.default.plainObject(r)||s.default.array(r))&&e(r);return Object.freeze(t)}},5241:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new Set;t.default=e=>{r.has(e)||(r.add(e),process.emitWarning(`Got: ${e}`,{type:"DeprecationWarning"}))}},6458:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:t(e)};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})),r};var t=Object.getPrototypeOf||function(e){return e.__proto__}},77:(e,t,r)=>{var s,o,n=r(5747),i=r(2161),a=r(8520),c=r(6458),l=r(1669);function u(e,t){Object.defineProperty(e,s,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(s=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(s="___graceful-fs.queue",o="___graceful-fs.previous");var h,d=function(){};if(l.debuglog?d=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(d=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!n[s]){var f=global[s]||[];u(n,f),n.close=function(e){function t(t,r){return e.call(n,t,(function(e){e||y(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,o,{value:e}),t}(n.close),n.closeSync=function(e){function t(t){e.apply(n,arguments),y()}return Object.defineProperty(t,o,{value:e}),t}(n.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){d(n[s]),r(2357).equal(n[s].length,0)}))}function p(e){i(e),e.gracefulify=p,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,s){return"function"==typeof r&&(s=r,r=null),function e(r,s,o,n){return t(r,s,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof o&&o.apply(this,arguments):m([e,[r,s,o],t,n||Date.now(),Date.now()])}))}(e,r,s)};var r=e.writeFile;e.writeFile=function(e,t,s,o){return"function"==typeof s&&(o=s,s=null),function e(t,s,o,n,i){return r(t,s,o,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof n&&n.apply(this,arguments):m([e,[t,s,o,n],r,i||Date.now(),Date.now()])}))}(e,t,s,o)};var s=e.appendFile;s&&(e.appendFile=function(e,t,r,o){return"function"==typeof r&&(o=r,r=null),function e(t,r,o,n,i){return s(t,r,o,(function(s){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof n&&n.apply(this,arguments):m([e,[t,r,o,n],s,i||Date.now(),Date.now()])}))}(e,t,r,o)});var o=e.copyFile;o&&(e.copyFile=function(e,t,r,s){return"function"==typeof r&&(s=r,r=0),function e(t,r,s,n,i){return o(t,r,s,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof n&&n.apply(this,arguments):m([e,[t,r,s,n],o,i||Date.now(),Date.now()])}))}(e,t,r,s)});var n=e.readdir;if(e.readdir=function(e,t,r){return"function"==typeof t&&(r=t,t=null),function e(t,r,s,o){return n(t,r,(function(n,i){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?(i&&i.sort&&i.sort(),"function"==typeof s&&s.call(this,n,i)):m([e,[t,r,s],n,o||Date.now(),Date.now()])}))}(e,t,r)},"v0.8"===process.version.substr(0,4)){var c=a(e);f=c.ReadStream,y=c.WriteStream}var l=e.ReadStream;l&&(f.prototype=Object.create(l.prototype),f.prototype.open=function(){var e=this;_(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var u=e.WriteStream;u&&(y.prototype=Object.create(u.prototype),y.prototype.open=function(){var e=this;_(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return f},set:function(e){f=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return y},set:function(e){y=e},enumerable:!0,configurable:!0});var h=f;Object.defineProperty(e,"FileReadStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var d=y;function f(e,t){return this instanceof f?(l.apply(this,arguments),this):f.apply(Object.create(f.prototype),arguments)}function y(e,t){return this instanceof y?(u.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var g=e.open;function _(e,t,r,s){return"function"==typeof r&&(s=r,r=null),function e(t,r,s,o,n){return g(t,r,s,(function(i,a){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):m([e,[t,r,s,o],i,n||Date.now(),Date.now()])}))}(e,t,r,s)}return e.open=_,e}function m(e){d("ENQUEUE",e[0].name,e[1]),n[s].push(e),g()}function y(){for(var e=Date.now(),t=0;t<n[s].length;++t)n[s][t].length>2&&(n[s][t][3]=e,n[s][t][4]=e);g()}function g(){if(clearTimeout(h),h=void 0,0!==n[s].length){var e=n[s].shift(),t=e[0],r=e[1],o=e[2],i=e[3],a=e[4];if(void 0===i)d("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){d("TIMEOUT",t.name,r);var c=r.pop();"function"==typeof c&&c.call(null,o)}else{var l=Date.now()-a,u=Math.max(a-i,1);l>=Math.min(1.2*u,100)?(d("RETRY",t.name,r),t.apply(null,r.concat([i]))):n[s].push(e)}void 0===h&&(h=setTimeout(g,0))}}global[s]||u(global,n[s]),e.exports=p(c(n)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!n.__patched&&(e.exports=p(n),n.__patched=!0)},8520:(e,t,r)=>{var s=r(2413).Stream;e.exports=function(e){return{ReadStream:function t(r,o){if(!(this instanceof t))return new t(r,o);s.call(this);var n=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,o=o||{};for(var i=Object.keys(o),a=0,c=i.length;a<c;a++){var l=i[a];this[l]=o[l]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return n.emit("error",e),void(n.readable=!1);n.fd=t,n.emit("open",t),n._read()})):process.nextTick((function(){n._read()}))},WriteStream:function t(r,o){if(!(this instanceof t))return new t(r,o);s.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var n=Object.keys(o),i=0,a=n.length;i<a;i++){var c=n[i];this[c]=o[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},2161:(e,t,r)=>{var s=r(7619),o=process.cwd,n=null,i=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return n||(n=o.call(process)),n};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var a=process.chdir;process.chdir=function(e){n=null,a.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,a)}e.exports=function(e){var t,r;function o(t){return t?function(r,s,o){return t.call(e,r,s,(function(e){h(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function n(t){return t?function(r,s){try{return t.call(e,r,s)}catch(e){if(!h(e))throw e}}:t}function a(t){return t?function(r,s,o,n){return t.call(e,r,s,o,(function(e){h(e)&&(e=null),n&&n.apply(this,arguments)}))}:t}function c(t){return t?function(r,s,o){try{return t.call(e,r,s,o)}catch(e){if(!h(e))throw e}}:t}function l(t){return t?function(r,s,o){function n(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),o&&o.apply(this,arguments)}return"function"==typeof s&&(o=s,s=null),s?t.call(e,r,s,n):t.call(e,r,n)}:t}function u(t){return t?function(r,s){var o=s?t.call(e,r,s):t.call(e,r);return o.uid<0&&(o.uid+=4294967296),o.gid<0&&(o.gid+=4294967296),o}:t}function h(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}s.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,o){e.open(t,s.O_WRONLY|s.O_SYMLINK,r,(function(t,s){t?o&&o(t):e.fchmod(s,r,(function(t){e.close(s,(function(e){o&&o(t||e)}))}))}))},e.lchmodSync=function(t,r){var o,n=e.openSync(t,s.O_WRONLY|s.O_SYMLINK,r),i=!0;try{o=e.fchmodSync(n,r),i=!1}finally{if(i)try{e.closeSync(n)}catch(e){}else e.closeSync(n)}return o}}(e),e.lutimes||function(e){s.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,o,n){e.open(t,s.O_SYMLINK,(function(t,s){t?n&&n(t):e.futimes(s,r,o,(function(t){e.close(s,(function(e){n&&n(t||e)}))}))}))},e.lutimesSync=function(t,r,o){var n,i=e.openSync(t,s.O_SYMLINK),a=!0;try{n=e.futimesSync(i,r,o),a=!1}finally{if(a)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return n}):(e.lutimes=function(e,t,r,s){s&&process.nextTick(s)},e.lutimesSync=function(){})}(e),e.chown=a(e.chown),e.fchown=a(e.fchown),e.lchown=a(e.lchown),e.chmod=o(e.chmod),e.fchmod=o(e.fchmod),e.lchmod=o(e.lchmod),e.chownSync=c(e.chownSync),e.fchownSync=c(e.fchownSync),e.lchownSync=c(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=l(e.stat),e.fstat=l(e.fstat),e.lstat=l(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(e,t,r,s){s&&process.nextTick(s)},e.lchownSync=function(){}),"win32"===i&&(e.rename=(t=e.rename,function(r,s,o){var n=Date.now(),i=0;t(r,s,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-n<6e4)return setTimeout((function(){e.stat(s,(function(e,n){e&&"ENOENT"===e.code?t(r,s,a):o(c)}))}),i),void(i<100&&(i+=10));o&&o(c)}))})),e.read=function(t){function r(r,s,o,n,i,a){var c;if(a&&"function"==typeof a){var l=0;c=function(u,h,d){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,r,s,o,n,i,c);a.apply(this,arguments)}}return t.call(e,r,s,o,n,i,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync=(r=e.readSync,function(t,s,o,n,i){for(var a=0;;)try{return r.call(e,t,s,o,n,i)}catch(e){if("EAGAIN"===e.code&&a<10){a++;continue}throw e}})}},6214:e=>{"use strict";const t=new Set([200,203,204,206,300,301,404,405,410,414,501]),r=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),s=new Set([500,502,503,504]),o={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},n={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function i(e){const t=parseInt(e,10);return isFinite(t)?t:0}function a(e){const t={};if(!e)return t;const r=e.trim().split(/\s*,\s*/);for(const e of r){const[r,s]=e.split(/\s*=\s*/,2);t[r]=void 0===s||s.replace(/^"|"$/g,"")}return t}function c(e){let t=[];for(const r in e){const s=e[r];t.push(!0===s?r:r+"="+s)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:r,cacheHeuristic:s,immutableMinTimeToLive:o,ignoreCargoCult:n,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==r,this._cacheHeuristic=void 0!==s?s:.1,this._immutableMinTtl=void 0!==o?o:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=a(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=a(e.headers["cache-control"]),n&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!r.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=a(e.headers["cache-control"]);return!t["no-cache"]&&!/no-cache/.test(e.headers.pragma)&&(!(t["max-age"]&&this.age()>t["max-age"])&&(!(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])&&(!(this.stale()&&(!t["max-stale"]||this._rescc["must-revalidate"]||!(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))&&this._requestMatches(e,!1))))}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const r of t)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const r in e)o[r]||(t[r]=e[r]);if(e.connection){const r=e.connection.trim().split(/\s*,\s*/);for(const e of r)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter((e=>!/^\s*1[0-9][0-9]/.test(e)));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(t)}`,e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return i(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return i(this._rescc["s-maxage"])}if(this._rescc["max-age"])return i(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<t?0:Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){const r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r)return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+i(this._rescc["stale-if-error"]),r=e+i(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,r)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+i(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+i(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;if(this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter((e=>!/^\s*W\//.test(e)));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||s.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let r=!1;if(void 0!==t.status&&304!=t.status?r=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(r=!0),!r)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const o={};for(const e in this._resHeaders)o[e]=e in t.headers&&!n[e]?t.headers[e]:this._resHeaders[e];const i=Object.assign({},t,{status:this._status,method:this._method,headers:o});return{policy:new this.constructor(e,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},4685:(e,t,r)=>{"use strict";const s=r(8614),o=r(4016),n=r(7565),i=r(1269),a=Symbol("currentStreamsCount"),c=Symbol("request"),l=Symbol("cachedOriginSet"),u=Symbol("gracefullyClosing"),h=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],d=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,f=(e,t)=>{for(const r of e)r[l].length<t[l].length&&r[l].every((e=>t[l].includes(e)))&&r[a]+t[a]<=t.remoteSettings.maxConcurrentStreams&&m(r)},p=({agent:e,isFree:t})=>{const r={};for(const s in e.sessions){const o=e.sessions[s].filter((e=>{const r=e[y.kCurrentStreamsCount]<e.remoteSettings.maxConcurrentStreams;return t?r:!r}));0!==o.length&&(r[s]=o)}return r},m=e=>{e[u]=!0,0===e[a]&&e.close()};class y extends s{constructor({timeout:e=6e4,maxSessions:t=1/0,maxFreeSessions:r=10,maxCachedTlsSessions:s=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxFreeSessions=r,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new i({maxSize:s})}static normalizeOrigin(e,t){return"string"==typeof e&&(e=new URL(e)),t&&e.hostname!==t&&(e.hostname=t),e.origin}normalizeOptions(e){let t="";if(e)for(const r of h)e[r]&&(t+=`:${e[r]}`);return t}_tryToCreateNewSession(e,t){if(!(e in this.queue)||!(t in this.queue[e]))return;const r=this.queue[e][t];this._sessionsCount<this.maxSessions&&!r.completed&&(r.completed=!0,r())}getSession(e,t,r){return new Promise(((s,o)=>{Array.isArray(r)?(r=[...r],s()):r=[{resolve:s,reject:o}];const i=this.normalizeOptions(t),h=y.normalizeOrigin(e,t&&t.servername);if(void 0===h){for(const{reject:e}of r)e(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(i in this.sessions){const e=this.sessions[i];let t,s=-1,o=-1;for(const r of e){const e=r.remoteSettings.maxConcurrentStreams;if(e<s)break;if(r[l].includes(h)){const n=r[a];if(n>=e||r[u]||r.destroyed)continue;t||(s=e),n>o&&(t=r,o=n)}}if(t){if(1!==r.length){for(const{reject:e}of r)e(new Error(`Expected the length of listeners to be 1, got ${r.length}.\nPlease report this to https://github.com/szmarczak/http2-wrapper/`));return}return void r[0].resolve(t)}}if(i in this.queue){if(h in this.queue[i])return this.queue[i][h].listeners.push(...r),void this._tryToCreateNewSession(i,h)}else this.queue[i]={};const p=()=>{i in this.queue&&this.queue[i][h]===g&&(delete this.queue[i][h],0===Object.keys(this.queue[i]).length&&delete this.queue[i])},g=()=>{const s=`${h}:${i}`;let o=!1;try{const y=n.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(s),...t});y[a]=0,y[u]=!1;const _=()=>y[a]<y.remoteSettings.maxConcurrentStreams;let w=!0;y.socket.once("session",(e=>{this.tlsSessionCache.set(s,e)})),y.once("error",(e=>{for(const{reject:t}of r)t(e);this.tlsSessionCache.delete(s)})),y.setTimeout(this.timeout,(()=>{y.destroy()})),y.once("close",(()=>{if(o){w&&this._freeSessionsCount--,this._sessionsCount--;const e=this.sessions[i];e.splice(e.indexOf(y),1),0===e.length&&delete this.sessions[i]}else{const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(const{reject:t}of r)t(e);p()}this._tryToCreateNewSession(i,h)}));const b=()=>{if(i in this.queue&&_())for(const e of y[l])if(e in this.queue[i]){const{listeners:t}=this.queue[i][e];for(;0!==t.length&&_();)t.shift().resolve(y);const r=this.queue[i];if(0===r[e].listeners.length&&(delete r[e],0===Object.keys(r).length)){delete this.queue[i];break}if(!_())break}};y.on("origin",(()=>{y[l]=y.originSet,_()&&(b(),f(this.sessions[i],y))})),y.once("remoteSettings",(()=>{if(y.ref(),y.unref(),this._sessionsCount++,g.destroyed){const e=new Error("Agent has been destroyed");for(const t of r)t.reject(e);y.destroy()}else{y[l]=y.originSet;{const e=this.sessions;if(i in e){const t=e[i];t.splice(((e,t,r)=>{let s=0,o=e.length;for(;s<o;){const n=s+o>>>1;r(e[n],t)?s=n+1:o=n}return s})(t,y,d),0,y)}else e[i]=[y]}this._freeSessionsCount+=1,o=!0,this.emit("session",y),b(),p(),0===y[a]&&this._freeSessionsCount>this.maxFreeSessions&&y.close(),0!==r.length&&(this.getSession(h,t,r),r.length=0),y.on("remoteSettings",(()=>{b(),f(this.sessions[i],y)}))}})),y[c]=y.request,y.request=(e,t)=>{if(y[u])throw new Error("The session is gracefully closing. No new streams are allowed.");const r=y[c](e,t);return y.ref(),++y[a],y[a]===y.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,r.once("close",(()=>{if(w=_(),--y[a],!y.destroyed&&!y.closed&&(((e,t)=>{for(const r of e)t[l].length<r[l].length&&t[l].every((e=>r[l].includes(e)))&&t[a]+r[a]<=r.remoteSettings.maxConcurrentStreams&&m(t)})(this.sessions[i],y),_()&&!y.closed)){w||(this._freeSessionsCount++,w=!0);const e=0===y[a];e&&y.unref(),e&&(this._freeSessionsCount>this.maxFreeSessions||y[u])?y.close():(f(this.sessions[i],y),b())}})),r}}catch(e){for(const t of r)t.reject(e);p()}};g.listeners=r,g.completed=!1,g.destroyed=!1,this.queue[i][h]=g,this._tryToCreateNewSession(i,h)}))}request(e,t,r,s){return new Promise(((o,n)=>{this.getSession(e,t,[{reject:n,resolve:e=>{try{o(e.request(r,s))}catch(e){n(e)}}}])}))}createConnection(e,t){return y.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const r=e.port||443,s=e.hostname||e.host;return void 0===t.servername&&(t.servername=s),o.connect(r,s,t)}closeFreeSessions(){for(const e of Object.values(this.sessions))for(const t of e)0===t[a]&&t.close()}destroy(e){for(const t of Object.values(this.sessions))for(const r of t)r.destroy(e);for(const e of Object.values(this.queue))for(const t of Object.values(e))t.destroyed=!0;this.queue={}}get freeSessions(){return p({agent:this,isFree:!0})}get busySessions(){return p({agent:this,isFree:!1})}}y.kCurrentStreamsCount=a,y.kGracefullyClosing=u,e.exports={Agent:y,globalAgent:new y}},6673:(e,t,r)=>{"use strict";const s=r(8605),o=r(7211),n=r(5322),i=r(1269),a=r(2287),c=r(4017),l=r(5978),u=new i({maxSize:100}),h=new Map,d=(e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};const s=()=>{e.emit("free",t,r)};t.on("free",s);const o=()=>{e.removeSocket(t,r)};t.on("close",o);const n=()=>{e.removeSocket(t,r),t.off("close",o),t.off("free",s),t.off("agentRemove",n)};t.on("agentRemove",n),e.emit("free",t,r)};e.exports=async(e,t,r)=>{if(("string"==typeof e||e instanceof URL)&&(e=l(new URL(e))),"function"==typeof t&&(r=t,t=void 0),t={ALPNProtocols:["h2","http/1.1"],...e,...t,resolveSocket:!0},!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const i="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||c(t),t.port=t.port||(i?443:80),t._defaultAgent=i?o.globalAgent:s.globalAgent;const f=t.agent;if(f){if(f.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");t.agent=f[i?"https":"http"]}return i&&"h2"===await(async e=>{const t=`${e.host}:${e.port}:${e.ALPNProtocols.sort()}`;if(!u.has(t)){if(h.has(t))return(await h.get(t)).alpnProtocol;const{path:r,agent:s}=e;e.path=e.socketPath;const i=n(e);h.set(t,i);try{const{socket:n,alpnProtocol:a}=await i;if(u.set(t,a),e.path=r,"h2"===a)n.destroy();else{const{globalAgent:t}=o,r=o.Agent.prototype.createConnection;s?s.createConnection===r?d(s,n,e):n.destroy():t.createConnection===r?d(t,n,e):n.destroy()}return h.delete(t),a}catch(e){throw h.delete(t),e}}return u.get(t)})(t)?(f&&(t.agent=f.http2),new a(t,r)):s.request(t,r)},e.exports.protocolCache=u},2287:(e,t,r)=>{"use strict";const s=r(7565),{Writable:o}=r(2413),{Agent:n,globalAgent:i}=r(4685),a=r(7138),c=r(5978),l=r(7306),u=r(8202),{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_PROTOCOL:d,ERR_HTTP_HEADERS_SENT:f,ERR_INVALID_HTTP_TOKEN:p,ERR_HTTP_INVALID_HEADER_VALUE:m,ERR_INVALID_CHAR:y}=r(3190),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:_,HTTP2_HEADER_PATH:w,HTTP2_METHOD_CONNECT:b}=s.constants,v=Symbol("headers"),S=Symbol("origin"),E=Symbol("session"),x=Symbol("options"),k=Symbol("flushedHeaders"),O=Symbol("jobs"),T=/^[\^`\-\w!#$%&*+.|~]+$/,C=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=class extends o{constructor(e,t,r){super({autoDestroy:!1});const s="string"==typeof e||e instanceof URL;if(s&&(e=c(e instanceof URL?e:new URL(e))),"function"==typeof t||void 0===t?(r=t,t=s?e:{...e}):t={...e,...t},t.h2session)this[E]=t.h2session;else if(!1===t.agent)this.agent=new n({maxFreeSessions:0});else if(void 0===t.agent||null===t.agent)"function"==typeof t.createConnection?(this.agent=new n({maxFreeSessions:0}),this.agent.createConnection=t.createConnection):this.agent=i;else{if("function"!=typeof t.agent.request)throw new h("options.agent",["Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(t.protocol&&"https:"!==t.protocol)throw new d(t.protocol,"https:");const o=t.port||t.defaultPort||this.agent&&this.agent.defaultPort||443,a=t.hostname||t.host||"localhost";delete t.hostname,delete t.host,delete t.port;const{timeout:l}=t;if(t.timeout=void 0,this[v]=Object.create(null),this[O]=[],this.socket=null,this.connection=null,this.method=t.method||"GET",this.path=t.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,t.headers)for(const[e,r]of Object.entries(t.headers))this.setHeader(e,r);t.auth&&!("authorization"in this[v])&&(this[v].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[x]=t,443===o?(this[S]=`https://${a}`,":authority"in this[v]||(this[v][":authority"]=a)):(this[S]=`https://${a}:${o}`,":authority"in this[v]||(this[v][":authority"]=`${a}:${o}`)),l&&this.setTimeout(l),r&&this.once("response",r),this[k]=!1}get method(){return this[v][_]}set method(e){e&&(this[v][_]=e.toUpperCase())}get path(){return this[v][w]}set path(e){e&&(this[v][w]=e)}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,r){if(this._mustNotHaveABody)return void r(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const s=()=>this._request.write(e,t,r);this._request?s():this[O].push(s)}_final(e){if(this.destroyed)return;this.flushHeaders();const t=()=>{this._mustNotHaveABody?e():this._request.end(e)};this._request?t():this[O].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick((()=>this.emit("abort"))),this.aborted=!0,this.destroy())}_destroy(e,t){this.res&&this.res._dump(),this._request&&this._request.destroy(),t(e)}async flushHeaders(){if(this[k]||this.destroyed)return;this[k]=!0;const e=this.method===b,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||l(t,this,["timeout","continue","close","error"]);const r=e=>(...t)=>{this.writable||this.destroyed?this.once("finish",(()=>{e(...t)})):e(...t)};t.once("response",r(((r,s,o)=>{const n=new a(this.socket,t.readableHighWaterMark);this.res=n,n.req=this,n.statusCode=r[g],n.headers=r,n.rawHeaders=o,n.once("end",(()=>{this.aborted?(n.aborted=!0,n.emit("aborted")):(n.complete=!0,n.socket=null,n.connection=null)})),e?(n.upgrade=!0,this.emit("connect",n,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",(e=>{n._dumped||n.push(e)||t.pause()})),t.once("end",(()=>{n.push(null)})),this.emit("response",n)||n._dump())}))),t.once("headers",r((e=>this.emit("information",{statusCode:e[g]})))),t.once("trailers",r(((e,t,r)=>{const{res:s}=this;s.trailers=e,s.rawTrailers=r})));const{socket:s}=t.session;this.socket=s,this.connection=s;for(const e of this[O])e();this.emit("socket",this.socket)};if(this[E])try{t(this[E].request(this[v]))}catch(e){this.emit("error",e)}else{this.reusedSocket=!0;try{t(await this.agent.request(this[S],this[x],this[v]))}catch(e){this.emit("error",e)}}}getHeader(e){if("string"!=typeof e)throw new h("name","string",e);return this[v][e.toLowerCase()]}get headersSent(){return this[k]}removeHeader(e){if("string"!=typeof e)throw new h("name","string",e);if(this.headersSent)throw new f("remove");delete this[v][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new f("set");if("string"!=typeof e||!T.test(e)&&!u(e))throw new p("Header name",e);if(void 0===t)throw new m(t,e);if(C.test(t))throw new y("header content",e);this[v][e.toLowerCase()]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const r=()=>this._request.setTimeout(e,t);return this._request?r():this[O].push(r),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},7138:(e,t,r)=>{"use strict";const{Readable:s}=r(2413);e.exports=class extends s{constructor(e,t){super({highWaterMark:t,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},9758:(e,t,r)=>{"use strict";const s=r(7565),o=r(4685),n=r(2287),i=r(7138),a=r(6673);e.exports={...s,ClientRequest:n,IncomingMessage:i,...o,request:(e,t,r)=>new n(e,t,r),get:(e,t,r)=>{const s=new n(e,t,r);return s.end(),s},auto:a}},4017:(e,t,r)=>{"use strict";const s=r(1631);e.exports=e=>{let t=e.host;const r=e.headers&&e.headers.host;return r&&(t=r.startsWith("[")?-1===r.indexOf("]")?r:r.slice(1,-1):r.split(":",1)[0]),s.isIP(t)?"":t}},3190:e=>{"use strict";const t=(t,r,s)=>{e.exports[r]=class extends t{constructor(...e){super("string"==typeof s?s:s(e)),this.name=`${super.name} [${r}]`,this.code=r}}};t(TypeError,"ERR_INVALID_ARG_TYPE",(e=>{const t=e[0].includes(".")?"property":"argument";let r=e[1];const s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${s?"one of":"of"} type ${r}. Received ${typeof e[2]}`})),t(TypeError,"ERR_INVALID_PROTOCOL",(e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`)),t(Error,"ERR_HTTP_HEADERS_SENT",(e=>`Cannot ${e[0]} headers after they are sent to the client`)),t(TypeError,"ERR_INVALID_HTTP_TOKEN",(e=>`${e[0]} must be a valid HTTP token [${e[1]}]`)),t(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",(e=>`Invalid value "${e[0]} for header "${e[1]}"`)),t(TypeError,"ERR_INVALID_CHAR",(e=>`Invalid character in ${e[0]} [${e[1]}]`))},8202:e=>{"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},7306:e=>{"use strict";e.exports=(e,t,r)=>{for(const s of r)e.on(s,((...e)=>t.emit(s,...e)))}},5978:e=>{"use strict";e.exports=e=>{const t={protocol:e.protocol,hostname:"string"==typeof e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return"string"==typeof e.port&&0!==e.port.length&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}},5602:e=>{"use strict";e.exports=(e,t=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},"string"!=typeof e)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof e}\``);if("number"!=typeof t)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if("string"!=typeof r.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(0===t)return e;const s=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(s,r.indent.repeat(t))}},2307:(e,t,r)=>{"use strict";const s=r(1631);e.exports=async(e,{timeout:t=1e3,host:r}={})=>{const o=new Promise(((o,n)=>{const i=new s.Socket,a=()=>{i.destroy(),n()};i.setTimeout(t),i.once("error",a),i.once("timeout",a),i.connect(e,r,(()=>{i.end(),o()}))}));try{return await o,!0}catch(e){return!1}}},9393:(e,t,r)=>{"use strict";const{promisify:s}=r(1669),o=r(881),n=r(1631),i=r(1021),a=r(2210),c=r(2307),l=r(1750),u=r(8147),h=r(6574),d=r(1081),f=r(4564),p=s(o.lookup);e.exports=async(e,{timeout:t=5e3}={})=>{const r=l(i(e).map((e=>async t=>{const r=new f(h(t));let s;r.port||(r.port="http:"===r.protocol?80:443);try{s=await(async e=>n.isIP(e)?e:(await p(e)).address)(r.hostname)}catch{return!1}return!(!s||d.has(s))&&([80,443].includes(r.port)?(async(e,t)=>{let r;try{r=await a(e,{https:{rejectUnauthorized:!1},retry:0,timeout:t})}catch{return!1}if(r.headers&&r.headers.location){const e=new f(r.headers.location).hostname.replace(/^\[/,"").replace(/]$/,"");return!d.has(e)}return!0})(r.toString(),e):c(r.port,{host:s}))})(t)));try{return await u(r,t)}catch{return!1}}},1085:(e,t)=>{t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var r="",s=Array.isArray(t);r=s?"[":"{";var o=!0;for(var n in t){var i="function"==typeof t[n]||!s&&void 0===t[n];Object.hasOwnProperty.call(t,n)&&!i&&(o||(r+=","),o=!1,s?null==t[n]?r+="null":r+=e(t[n]):void 0!==t[n]&&(r+=e(n)+":"+e(t[n])))}return r+(s?"]":"}")}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,(function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t}))}},4958:(e,t,r)=>{"use strict";const s=r(8614),o=r(1085);e.exports=class extends s{constructor(e,t){if(super(),this.opts=Object.assign({namespace:"keyv",serialize:o.stringify,deserialize:o.parse},"string"==typeof e?{uri:e}:e,t),!this.opts.store){const e=Object.assign({},this.opts);this.opts.store=(e=>{const t={redis:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql"};if(e.adapter||e.uri){const s=e.adapter||/^[^:]*/.exec(e.uri)[0];return new(r(3196)(t[s]))(e)}return new Map})(e)}"function"==typeof this.opts.store.on&&this.opts.store.on("error",(e=>this.emit("error",e))),this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}get(e,t){const r=this._getKeyPrefix(e),{store:s}=this.opts;return Promise.resolve().then((()=>s.get(r))).then((e=>"string"==typeof e?this.opts.deserialize(e):e)).then((r=>{if(void 0!==r){if(!("number"==typeof r.expires&&Date.now()>r.expires))return t&&t.raw?r:r.value;this.delete(e)}}))}set(e,t,r){const s=this._getKeyPrefix(e);void 0===r&&(r=this.opts.ttl),0===r&&(r=void 0);const{store:o}=this.opts;return Promise.resolve().then((()=>{const e="number"==typeof r?Date.now()+r:null;return t={value:t,expires:e},this.opts.serialize(t)})).then((e=>o.set(s,e,r))).then((()=>!0))}delete(e){const t=this._getKeyPrefix(e),{store:r}=this.opts;return Promise.resolve().then((()=>r.delete(t)))}clear(){const{store:e}=this.opts;return Promise.resolve().then((()=>e.clear()))}}},3196:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3196,e.exports=t},5989:e=>{"use strict";e.exports=e=>{const t={};for(const[r,s]of Object.entries(e))t[r.toLowerCase()]=s;return t}},6344:e=>{"use strict";const t=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];e.exports=(e,r)=>{const s=new Set(Object.keys(e).concat(t));for(const t of s)t in r||(r[t]="function"==typeof e[t]?e[t].bind(e):e[t])}},15:(e,t,r)=>{"use strict";const s="undefined"==typeof URL?r(8835).URL:URL,o=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),n=(e,t)=>{if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},Reflect.has(t,"normalizeHttps"))throw new Error("options.normalizeHttps is renamed to options.forceHttp");if(Reflect.has(t,"normalizeHttp"))throw new Error("options.normalizeHttp is renamed to options.forceHttps");if(Reflect.has(t,"stripFragment"))throw new Error("options.stripFragment is renamed to options.stripHash");if(e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const r=e.match(/^data:([^,]*?),([^#]*?)(?:#(.*))?$/);if(!r)throw new Error(`Invalid URL: ${e}`);const s=r[1].split(";"),o=r[2],n=t?"":r[3];let i=!1;"base64"===s[s.length-1]&&(s.pop(),i=!0);const a=(s.shift()||"").toLowerCase(),c=[...s.map((e=>{let[t,r=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(r=r.toLowerCase(),"us-ascii"===r)?"":`${t}${r?`=${r}`:""}`})).filter(Boolean)];return i&&c.push("base64"),(0!==c.length||a&&"text/plain"!==a)&&c.unshift(a),`data:${c.join(";")},${i?o.trim():o}${n?`#${n}`:""}`})(e,t);const r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const n=new s(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===n.protocol&&(n.protocol="http:"),t.forceHttps&&"http:"===n.protocol&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash&&(n.hash=""),n.pathname&&(n.pathname=n.pathname.replace(/((?!:).|^)\/{2,}/g,((e,t)=>/^(?!\/)/g.test(t)?`${t}/`:"/"))),n.pathname&&(n.pathname=decodeURI(n.pathname)),!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=n.pathname.split("/");const r=e[e.length-1];o(r,t.removeDirectoryIndex)&&(e=e.slice(0,e.length-1),n.pathname=e.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.([a-z\-\d]{2,63})\.([a-z.]{2,5})$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...n.searchParams.keys()])o(e,t.removeQueryParameters)&&n.searchParams.delete(e);return t.sortQueryParameters&&n.searchParams.sort(),t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,"")),e=n.toString(),!t.removeTrailingSlash&&"/"!==n.pathname||""!==n.hash||(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e};e.exports=n,e.exports.default=n},778:(e,t,r)=>{var s=r(2479);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function n(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=s(o),e.exports.strict=s(n),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})}))},1750:(e,t,r)=>{"use strict";const s=r(7759),o=r(341);e.exports=(e,t)=>{const r=s(e,{...t,count:1});return o.fn((async e=>{e((()=>{r.cancel()}));const[t]=await r;return t}))()},e.exports.AggregateError=s.AggregateError},341:e=>{"use strict";class t extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class r{static fn(e){return(...t)=>new r(((r,s,o)=>{t.push(o),e(...t).then(r,s)}))}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((t,r)=>{this._reject=r;const s=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};return Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e((e=>{this._isCanceled&&s.shouldReject||(this._isPending=!1,t(e))}),(e=>{this._isPending=!1,r(e)}),s)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new t(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(r.prototype,Promise.prototype),e.exports=r,e.exports.CancelError=t},7345:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},7759:(e,t,r)=>{"use strict";const s=r(6455),o=r(341);class n extends Error{}e.exports=(e,t)=>new o(((r,o,i)=>{const{count:a,filter:c=(()=>!0)}=t;if(!Number.isFinite(a))return void o(new TypeError("Expected a finite number, got "+typeof t.count));const l=[],u=[];let h=0,d=!1;const f=new Set,p=()=>{for(const t of e)f.has(t)||"function"!=typeof t.cancel||t.cancel()};i(p);for(const t of e)h++,(async()=>{try{const e=await t;if(d)return;if(!c(e))throw new n("Value does not satisfy filter");l.push(e)}catch(e){u.push(e)}finally{f.add(t),!d&&(l.length===a&&(r(l),d=!0),h-u.length<a&&(o(new s(u)),d=!0),d)&&p()}})();a>h&&(o(new RangeError(`Expected input to contain at least ${t.count} items, but contains ${h} items`)),p())})),e.exports.AggregateError=s,e.exports.FilterError=n},8147:(e,t,r)=>{"use strict";const s=r(7345);class o extends Error{constructor(e){super(e),this.name="TimeoutError"}}const n=(e,t,r)=>new Promise(((n,i)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void n(e);const a=setTimeout((()=>{if("function"==typeof r){try{n(r())}catch(e){i(e)}return}const s=r instanceof Error?r:new o("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),i(s)}),t);s(e.then(n,i),(()=>{clearTimeout(a)}))}));e.exports=n,e.exports.default=n,e.exports.TimeoutError=o},6574:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e)throw new TypeError(`Expected \`url\` to be of type \`string\`, got \`${typeof e}\``);return e=e.trim(),t={https:!0,...t},/^\.*\/|^(?!localhost)\w+:/.test(e)?e:e.replace(/^(?!(?:\w+:)?\/\/)/,t.https?"https://":"http://")}},4286:(e,t,r)=>{var s=r(778),o=r(2840),n=r(5747),i=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},l=function(e,t,r,l){l=s(l);var u=!1;e.on("close",(function(){u=!0})),o(e,{readable:t,writable:r},(function(e){if(e)return l(e);u=!0,l()}));var h=!1;return function(t){if(!u&&!h)return h=!0,function(e){return!!a&&!!n&&(e instanceof(n.ReadStream||i)||e instanceof(n.WriteStream||i))&&c(e.close)}(e)?e.close(i):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void l(t||new Error("stream was destroyed"))}},u=function(e){e()},h=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||i)&&t.pop()||i;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var s=t.map((function(o,n){var i=n<t.length-1;return l(o,i,n>0,(function(t){e||(e=t),t&&s.forEach(u),i||(s.forEach(u),r(e))}))}));return t.reduce(h)}},7129:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function s(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var s,n,i=[];for(n in"string"!=typeof t&&(t="?"),e)if(r.call(e,n)){if((s=e[n])||null!=s&&!isNaN(s)||(s=""),n=o(n),s=o(s),null===n||null===s)continue;i.push(n+"="+s)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var n=s(t[1]),i=s(t[2]);null===n||null===i||n in o||(o[n]=i)}return o}},1269:e=>{"use strict";class t{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=t},7418:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},5322:(e,t,r)=>{"use strict";const s=r(4016);e.exports=(e={})=>new Promise(((t,r)=>{let o=!1;const n=async()=>{a.off("timeout",i),a.off("error",r),e.resolveSocket?(t({alpnProtocol:a.alpnProtocol,socket:a,timeout:o}),o&&(await Promise.resolve(),a.emit("timeout"))):(a.destroy(),t({alpnProtocol:a.alpnProtocol,timeout:o}))},i=async()=>{o=!0,n()},a=s.connect(e,n);a.on("error",r),a.once("timeout",i)}))},4259:(e,t,r)=>{"use strict";const s=r(2413).Readable,o=r(5989);e.exports=class extends s{constructor(e,t,r,s){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof s)throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=o(t),this.body=r,this.url=s}_read(){this.push(this.body),this.push(null)}}},1081:(e,t,r)=>{"use strict";e.exports=new Set(r(5982))},4564:(e,t,r)=>{"use strict";var s=r(7418),o=r(7129),n=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,a=/^[a-zA-Z]:/,c=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function l(e){return(e||"").toString().replace(c,"")}var u=[["#","hash"],["?","query"],function(e,t){return f(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function d(e){var t,r=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).location||{},s={},o=typeof(e=e||r);if("blob:"===e.protocol)s=new m(unescape(e.pathname),{});else if("string"===o)for(t in s=new m(e,{}),h)delete s[t];else if("object"===o){for(t in e)t in h||(s[t]=e[t]);void 0===s.slashes&&(s.slashes=n.test(e.href))}return s}function f(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function p(e,t){e=l(e),t=t||{};var r,s=i.exec(e),o=s[1]?s[1].toLowerCase():"",n=!!s[2],a=!!s[3],c=0;return n?a?(r=s[2]+s[3]+s[4],c=s[2].length+s[3].length):(r=s[2]+s[4],c=s[2].length):a?(r=s[3]+s[4],c=s[3].length):r=s[4],"file:"===o?c>=2&&(r=r.slice(2)):f(o)?r=s[4]:o?n&&(r=r.slice(2)):c>=2&&f(t.protocol)&&(r=s[4]),{protocol:o,slashes:n||f(o),slashesCount:c,rest:r}}function m(e,t,r){if(e=l(e),!(this instanceof m))return new m(e,t,r);var n,i,c,h,y,g,_=u.slice(),w=typeof t,b=this,v=0;for("object"!==w&&"string"!==w&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),n=!(i=p(e||"",t=d(t))).protocol&&!i.slashes,b.slashes=i.slashes||n&&t.slashes,b.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||a.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!f(b.protocol)))&&(_[3]=[/(.*)/,"pathname"]);v<_.length;v++)"function"!=typeof(h=_[v])?(c=h[0],g=h[1],c!=c?b[g]=e:"string"==typeof c?~(y=e.indexOf(c))&&("number"==typeof h[2]?(b[g]=e.slice(0,y),e=e.slice(y+h[2])):(b[g]=e.slice(y),e=e.slice(0,y))):(y=c.exec(e))&&(b[g]=y[1],e=e.slice(0,y.index)),b[g]=b[g]||n&&h[3]&&t[g]||"",h[4]&&(b[g]=b[g].toLowerCase())):e=h(e,b);r&&(b.query=r(b.query)),n&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),s=r.length,o=r[s-1],n=!1,i=0;s--;)"."===r[s]?r.splice(s,1):".."===r[s]?(r.splice(s,1),i++):i&&(0===s&&(n=!0),r.splice(s,1),i--);return n&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&f(b.protocol)&&(b.pathname="/"+b.pathname),s(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(h=b.auth.split(":"),b.username=h[0]||"",b.password=h[1]||""),b.origin="file:"!==b.protocol&&f(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}m.prototype={set:function(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),n[e]=t;break;case"port":n[e]=t,s(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";n[e]=t.charAt(0)!==i?i+t:t}else n[e]=t;break;default:n[e]=t}for(var a=0;a<u.length;a++){var c=u[a];c[4]&&(n[c[1]]=n[c[1]].toLowerCase())}return n.origin="file:"!==n.protocol&&f(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,s=r.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var n=s+(r.slashes||f(r.protocol)?"//":"");return r.username&&(n+=r.username,r.password&&(n+=":"+r.password),n+="@"),n+=r.host+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(n+=r.hash),n}},m.extractProtocol=p,m.location=d,m.trimLeft=l,m.qs=o,e.exports=m},2479:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){s[e]=t[e]})),s;function s(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var s=t.apply(this,e),o=e[e.length-1];return"function"==typeof s&&s!==o&&Object.keys(o).forEach((function(e){s[e]=o[e]})),s}}},8777:(e,t,r)=>{"use strict";const s=r(8762);s.createWebSocketStream=r(404),s.Server=r(9284),s.Receiver=r(2957),s.Sender=r(7330),s.WebSocket=s,s.WebSocketServer=s.Server,e.exports=s},977:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:s}=r(1872);function o(e,t){if(0===e.length)return s;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const s=e[t];r.set(s,o),o+=s.length}return o<t?r.slice(0,o):r}function n(e,t,r,s,o){for(let n=0;n<o;n++)r[s+n]=e[n]^t[3&n]}function i(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=r(6772);e.exports={concat:o,mask(e,r,s,o,i){i<48?n(e,r,s,o,i):t.mask(e,r,s,o,i)},toArrayBuffer:a,toBuffer:c,unmask(e,r){e.length<32?i(e,r):t.unmask(e,r)}}}catch(t){e.exports={concat:o,mask:n,toArrayBuffer:a,toBuffer:c,unmask:i}}},1872:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},62:(e,t,r)=>{"use strict";const{kForOnEventAttribute:s,kListener:o}=r(1872),n=Symbol("kCode"),i=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),h=Symbol("kType"),d=Symbol("kWasClean");class f{constructor(e){this[u]=null,this[h]=e}get target(){return this[u]}get type(){return this[h]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class p extends f{constructor(e,t={}){super(e),this[n]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[d]=void 0!==t.wasClean&&t.wasClean}get code(){return this[n]}get reason(){return this[l]}get wasClean(){return this[d]}}Object.defineProperty(p.prototype,"code",{enumerable:!0}),Object.defineProperty(p.prototype,"reason",{enumerable:!0}),Object.defineProperty(p.prototype,"wasClean",{enumerable:!0});class m extends f{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class y extends f{constructor(e,t={}){super(e),this[i]=void 0===t.data?null:t.data}get data(){return this[i]}}Object.defineProperty(y.prototype,"data",{enumerable:!0});const g={addEventListener(e,t,r={}){let n;if("message"===e)n=function(e,r){const s=new y("message",{data:r?e:e.toString()});s[u]=this,t.call(this,s)};else if("close"===e)n=function(e,r){const s=new p("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[u]=this,t.call(this,s)};else if("error"===e)n=function(e){const r=new m("error",{error:e,message:e.message});r[u]=this,t.call(this,r)};else{if("open"!==e)return;n=function(){const e=new f("open");e[u]=this,t.call(this,e)}}n[s]=!!r[s],n[o]=t,r.once?this.once(e,n):this.on(e,n)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[o]===t&&!r[s]){this.removeListener(e,r);break}}};e.exports={CloseEvent:p,ErrorEvent:m,Event:f,EventTarget:g,MessageEvent:y}},1503:(e,t,r)=>{"use strict";const{tokenChars:s}=r(6746);function o(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,n,i=Object.create(null),a=!1,c=!1,l=!1,u=-1,h=-1,d=-1,f=0;for(;f<e.length;f++)if(h=e.charCodeAt(f),void 0===r)if(-1===d&&1===s[h])-1===u&&(u=f);else if(0===f||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);const s=e.slice(u,d);44===h?(o(t,s,i),i=Object.create(null)):r=s,u=d=-1}}else-1===d&&-1!==u&&(d=f);else if(void 0===n)if(-1===d&&1===s[h])-1===u&&(u=f);else if(32===h||9===h)-1===d&&-1!==u&&(d=f);else if(59===h||44===h){if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f),o(i,e.slice(u,d),!0),44===h&&(o(t,r,i),i=Object.create(null),r=void 0),u=d=-1}else{if(61!==h||-1===u||-1!==d)throw new SyntaxError(`Unexpected character at index ${f}`);n=e.slice(u,f),u=d=-1}else if(c){if(1!==s[h])throw new SyntaxError(`Unexpected character at index ${f}`);-1===u?u=f:a||(a=!0),c=!1}else if(l)if(1===s[h])-1===u&&(u=f);else if(34===h&&-1!==u)l=!1,d=f;else{if(92!==h)throw new SyntaxError(`Unexpected character at index ${f}`);c=!0}else if(34===h&&61===e.charCodeAt(f-1))l=!0;else if(-1===d&&1===s[h])-1===u&&(u=f);else if(-1===u||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);let s=e.slice(u,d);a&&(s=s.replace(/\\/g,""),a=!1),o(i,n,s),44===h&&(o(t,r,i),i=Object.create(null),r=void 0),n=void 0,u=d=-1}}else-1===d&&(d=f);if(-1===u||l||32===h||9===h)throw new SyntaxError("Unexpected end of input");-1===d&&(d=f);const p=e.slice(u,d);return void 0===r?o(t,p,i):(void 0===n?o(i,p,!0):o(i,n,a?p.replace(/\\/g,""):p),o(t,r,i)),t}}},305:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},5196:(e,t,r)=>{"use strict";const s=r(8761),o=r(977),n=r(305),{kStatusCode:i}=r(1872),a=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),l=Symbol("total-length"),u=Symbol("callback"),h=Symbol("buffers"),d=Symbol("error");let f;function p(e){this[h].push(e),this[l]+=e.length}function m(e){this[l]+=e.length,this[c]._maxPayload<1||this[l]<=this[c]._maxPayload?this[h].push(e):(this[d]=new RangeError("Max payload size exceeded"),this[d].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[d][i]=1009,this.removeListener("data",m),this.reset())}function y(e){this[c]._inflate=null,e[i]=1007,this[u](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new n(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[u];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){f.add((s=>{this._decompress(e,t,((e,t)=>{s(),r(e,t)}))}))}compress(e,t,r){f.add((s=>{this._compress(e,t,((e,t)=>{s(),r(e,t)}))}))}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=s.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[l]=0,this._inflate[h]=[],this._inflate.on("error",y),this._inflate.on("data",m)}this._inflate[u]=r,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush((()=>{const e=this._inflate[d];if(e)return this._inflate.close(),this._inflate=null,void r(e);const s=o.concat(this._inflate[h],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[h]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),r(null,s)}))}_compress(e,t,r){const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=s.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[h]=[],this._deflate.on("data",p)}this._deflate[u]=r,this._deflate.write(e),this._deflate.flush(s.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=o.concat(this._deflate[h],this._deflate[l]);t&&(e=e.slice(0,e.length-4)),this._deflate[u]=null,this._deflate[l]=0,this._deflate[h]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},2957:(e,t,r)=>{"use strict";const{Writable:s}=r(2413),o=r(5196),{BINARY_TYPES:n,EMPTY_BUFFER:i,kStatusCode:a,kWebSocket:c}=r(1872),{concat:l,toArrayBuffer:u,unmask:h}=r(977),{isValidStatusCode:d,isValidUTF8:f}=r(6746);function p(e,t,r,s,o){const n=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,p),n.code=o,n[a]=s,n}e.exports=class extends s{constructor(e={}){super(),this._binaryType=e.binaryType||n[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],s=t.length-e;e>=r.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),s),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[o.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,p(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,p(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,p(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=i;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&h(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[o.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const s=this.dataMessage();if(s)return t(s);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?l(t,e):"arraybuffer"===this._binaryType?u(l(t,e)):t,this.emit("message",r,!0)}else{const r=l(t,e);if(!this._skipUTF8Validation&&!f(r))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,i),this.end();else{if(1===e.length)return p(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!d(t))return p(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=e.slice(2);if(!this._skipUTF8Validation&&!f(r))return p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},7330:(e,t,r)=>{"use strict";r(1631),r(4016);const{randomFillSync:s}=r(6417),o=r(5196),{EMPTY_BUFFER:n}=r(1872),{isValidStatusCode:i}=r(6746),{mask:a,toBuffer:c}=r(977),l=Buffer.alloc(4);class u{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let o=t.mask?6:2,n=e.length;e.length>=65536?(o+=8,n=127):e.length>125&&(o+=2,n=126);const i=Buffer.allocUnsafe(r?e.length+o:o);return i[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(i[0]|=64),i[1]=n,126===n?i.writeUInt16BE(e.length,2):127===n&&(i.writeUInt32BE(0,2),i.writeUInt32BE(e.length,6)),t.mask?(s(l,0,4),i[1]|=128,i[o-4]=l[0],i[o-3]=l[1],i[o-2]=l[2],i[o-1]=l[3],r?(a(e,l,i,o,e.length),[i]):(a(e,l,e,0,e.length),[i,e])):[i,e]}close(e,t,r,s){let o;if(void 0===e)o=n;else{if("number"!=typeof e||!i(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+r),o.writeUInt16BE(e,0),"string"==typeof t?o.write(t,2):o.set(t,2)}else o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0)}this._deflating?this.enqueue([this.doClose,o,r,s]):this.doClose(o,r,s)}doClose(e,t,r){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const s=c(e);if(s.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,s,t,c.readOnly,r]):this.doPing(s,t,c.readOnly,r)}doPing(e,t,r,s){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),s)}pong(e,t,r){const s=c(e);if(s.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,s,t,c.readOnly,r]):this.doPong(s,t,c.readOnly,r)}doPong(e,t,r,s){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),s)}send(e,t,r){const s=c(e),n=this._extensions[o.extensionName];let i=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&n&&(a=s.length>=n._threshold),this._compress=a):(a=!1,i=0),t.fin&&(this._firstFragment=!0),n){const e={fin:t.fin,rsv1:a,opcode:i,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,s,this._compress,e,r]):this.dispatch(s,this._compress,e,r)}else this.sendFrame(u.frame(s,{fin:t.fin,rsv1:!1,opcode:i,mask:t.mask,readOnly:c.readOnly}),r)}dispatch(e,t,r,s){if(!t)return void this.sendFrame(u.frame(e,r),s);const n=this._extensions[o.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,n.compress(e,r.fin,((t,o)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof s&&s(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(u.frame(o,r),s),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=u},404:(e,t,r)=>{"use strict";const{Duplex:s}=r(2413);function o(e){e.emit("close")}function n(){!this.destroyed&&this._writableState.finished&&this.destroy()}function i(e){this.removeListener("error",i),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0,a=!0;function c(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",c)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",c));const l=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,s){const o=!s&&l._readableState.objectMode?t.toString():t;l.push(o)||(r=!1,e._socket.pause())})),e.once("error",(function(e){l.destroyed||(a=!1,l.destroy(e))})),e.once("close",(function(){l.destroyed||l.push(null)})),l._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(o,l);let s=!1;e.once("error",(function(e){s=!0,r(e)})),e.once("close",(function(){s||r(t),process.nextTick(o,l)})),a&&e.terminate()},l._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),l._readableState.endEmitted&&l.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){l._final(t)}))},l._read=function(){e.readyState!==e.OPEN||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},l._write=function(t,r,s){e.readyState!==e.CONNECTING?e.send(t,s):e.once("open",(function(){l._write(t,r,s)}))},l.on("end",n),l.on("error",i),l}},640:(e,t,r)=>{"use strict";const{tokenChars:s}=r(6746);e.exports={parse:function(e){const t=new Set;let r=-1,o=-1,n=0;for(;n<e.length;n++){const i=e.charCodeAt(n);if(-1===o&&1===s[i])-1===r&&(r=n);else if(0===n||32!==i&&9!==i){if(44!==i)throw new SyntaxError(`Unexpected character at index ${n}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${n}`);-1===o&&(o=n);const s=e.slice(r,o);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);t.add(s),r=o=-1}}else-1===o&&-1!==r&&(o=n)}if(-1===r||-1!==o)throw new SyntaxError("Unexpected end of input");const i=e.slice(r,n);if(t.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return t.add(i),t}}},6746:(e,t,r)=>{"use strict";const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function o(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function n(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}try{const t=r(6993);e.exports={isValidStatusCode:o,isValidUTF8:e=>e.length<150?n(e):t(e),tokenChars:s}}catch(t){e.exports={isValidStatusCode:o,isValidUTF8:n,tokenChars:s}}},9284:(e,t,r)=>{"use strict";const s=r(8614),o=r(8605),{createHash:n}=(r(7211),r(1631),r(4016),r(6417)),i=r(1503),a=r(5196),c=r(640),l=r(8762),{GUID:u,kWebSocket:h}=r(1872),d=/^[+/0-9A-Za-z]{22}==$/;function f(e){e._state=2,e.emit("close")}function p(){this.destroy()}function m(e,t,r,s){e.writable&&(r=r||o.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.write(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(s).map((e=>`${e}: ${s[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",p),e.destroy()}e.exports=class extends s{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=o.createServer(((e,t)=>{const r=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,s)=>{this.handleUpgrade(t,r,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(f,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(f,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{f(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",p);const o=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"],n=+e.headers["sec-websocket-version"];if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!o||!d.test(o)||8!==n&&13!==n||!this.shouldHandle(e))return m(t,400);const l=e.headers["sec-websocket-protocol"];let u=new Set;if(void 0!==l)try{u=c.parse(l)}catch(e){return m(t,400)}const h=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&void 0!==h){const e=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=i.parse(h);t[a.extensionName]&&(e.accept(t[a.extensionName]),f[a.extensionName]=e)}catch(e){return m(t,400)}}if(this.options.verifyClient){const i={origin:e.headers[8===n?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(i,((n,i,a,c)=>{if(!n)return m(t,i||401,a,c);this.completeUpgrade(f,o,u,e,t,r,s)}));if(!this.options.verifyClient(i))return m(t,401)}this.completeUpgrade(f,o,u,e,t,r,s)}completeUpgrade(e,t,r,s,o,c,d){if(!o.readable||!o.writable)return o.destroy();if(o[h])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(o,503);const y=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${n("sha1").update(t+u).digest("base64")}`],g=new l(null);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,s):r.values().next().value;e&&(y.push(`Sec-WebSocket-Protocol: ${e}`),g._protocol=e)}if(e[a.extensionName]){const t=e[a.extensionName].params,r=i.format({[a.extensionName]:[t]});y.push(`Sec-WebSocket-Extensions: ${r}`),g._extensions=e}this.emit("headers",y,s),o.write(y.concat("\r\n").join("\r\n")),o.removeListener("error",p),g.setSocket(o,c,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(g),g.on("close",(()=>{this.clients.delete(g),this._shouldEmitClose&&!this.clients.size&&process.nextTick(f,this)}))),d(g,s)}}},8762:(e,t,r)=>{"use strict";const s=r(8614),o=r(7211),n=r(8605),i=r(1631),a=r(4016),{randomBytes:c,createHash:l}=r(6417),{URL:u}=r(8835),h=r(5196),d=r(2957),f=r(7330),{BINARY_TYPES:p,EMPTY_BUFFER:m,GUID:y,kForOnEventAttribute:g,kListener:_,kStatusCode:w,kWebSocket:b,NOOP:v}=r(1872),{EventTarget:{addEventListener:S,removeEventListener:E}}=r(62),{format:x,parse:k}=r(1503),{toBuffer:O}=r(977),T=["CONNECTING","OPEN","CLOSING","CLOSED"],C=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,P=[8,13];class A extends s{constructor(e,t,r){super(),this._binaryType=p[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=m,this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=A.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),R(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){p.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const s=new d({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new f(e,this._extensions),this._receiver=s,this._socket=e,s[b]=this,e[b]=this,s.on("conclude",I),s.on("drain",M),s.on("error",U),s.on("message",q),s.on("ping",$),s.on("pong",H),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",B),e.on("data",W),e.on("end",z),e.on("error",V),this._readyState=A.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=A.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[h.extensionName]&&this._extensions[h.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=A.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return j(this,this._req,e)}this.readyState!==A.CLOSING?(this._readyState=A.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}ping(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||m,t,r)):D(this,e,r)}pong(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||m,t,r)):D(this,e,r)}send(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==A.OPEN)return void D(this,e,r);const s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[h.extensionName]||(s.compress=!1),this._sender.send(e||m,s,r)}terminate(){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return j(this,this._req,e)}this._socket&&(this._readyState=A.CLOSING,this._socket.destroy())}}}function R(e,t,r,s){const i={protocolVersion:P[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!P.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${P.join(", ")})`);let a;if(t instanceof u)a=t,e._url=t.href;else{try{a=new u(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const d="wss:"===a.protocol,f="ws+unix:"===a.protocol;if("ws:"!==a.protocol&&!d&&!f)throw new SyntaxError('The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"');if(f&&!a.pathname)throw new SyntaxError("The URL's pathname is empty");if(a.hash)throw new SyntaxError("The URL contains a fragment identifier");const p=d?443:80,m=c(16).toString("base64"),g=d?o.get:n.get,_=new Set;let w;if(i.createConnection=d?L:N,i.defaultPort=i.defaultPort||p,i.port=a.port||p,i.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,i.headers={"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...i.headers},i.path=a.pathname+a.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(w=new h(!0!==i.perMessageDeflate?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=x({[h.extensionName]:w.offer()})),r.length){for(const e of r){if("string"!=typeof e||!C.test(e)||_.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");_.add(e)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(a.username||a.password)&&(i.auth=`${a.username}:${a.password}`),f){const e=i.path.split(":");i.socketPath=e[0],i.path=e[1]}let b=e._req=g(i);i.timeout&&b.on("timeout",(()=>{j(e,b,"Opening handshake has timed out")})),b.on("error",(t=>{null===b||b.aborted||(b=e._req=null,e._readyState=A.CLOSING,e.emit("error",t),e.emitClose())})),b.on("response",(o=>{const n=o.headers.location,a=o.statusCode;if(n&&i.followRedirects&&a>=300&&a<400){if(++e._redirects>i.maxRedirects)return void j(e,b,"Maximum redirects exceeded");b.abort();const o=new u(n,t);R(e,o,r,s)}else e.emit("unexpected-response",b,o)||j(e,b,`Unexpected server response: ${o.statusCode}`)})),b.on("upgrade",((t,r,s)=>{if(e.emit("upgrade",t),e.readyState!==A.CONNECTING)return;b=e._req=null;const o=l("sha1").update(m+y).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void j(e,r,"Invalid Sec-WebSocket-Accept header");const n=t.headers["sec-websocket-protocol"];let a;if(void 0!==n?_.size?_.has(n)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":_.size&&(a="Server sent no subprotocol"),a)return void j(e,r,a);n&&(e._protocol=n);const c=t.headers["sec-websocket-extensions"];if(void 0!==c){if(!w)return void j(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=k(c)}catch(t){return void j(e,r,"Invalid Sec-WebSocket-Extensions header")}const s=Object.keys(t);if(1!==s.length||s[0]!==h.extensionName)return void j(e,r,"Server indicated an extension that was not requested");try{w.accept(t[h.extensionName])}catch(t){return void j(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[h.extensionName]=w}e.setSocket(r,s,{maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}))}function N(e){return e.path=e.socketPath,i.connect(e)}function L(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=i.isIP(e.host)?"":e.host),a.connect(e)}function j(e,t,r){e._readyState=A.CLOSING;const s=new Error(r);Error.captureStackTrace(s,j),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function D(e,t,r){if(t){const r=O(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}r&&r(new Error(`WebSocket is not open: readyState ${e.readyState} (${T[e.readyState]})`))}function I(e,t){const r=this[b];r._socket.removeListener("data",W),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function M(){this[b]._socket.resume()}function U(e){const t=this[b];t._socket.removeListener("data",W),t._socket.resume(),t.close(e[w]),t.emit("error",e)}function F(){this[b].emitClose()}function q(e,t){this[b].emit("message",e,t)}function $(e){const t=this[b];t.pong(e,!t._isServer,v),t.emit("ping",e)}function H(e){this[b].emit("pong",e)}function B(){const e=this[b];let t;this.removeListener("close",B),this.removeListener("data",W),this.removeListener("end",z),e._readyState=A.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[b]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",F),e._receiver.on("finish",F))}function W(e){this[b]._receiver.write(e)||this.pause()}function z(){const e=this[b];e._readyState=A.CLOSING,e._receiver.end(),this.end()}function V(){const e=this[b];this.removeListener("error",V),this.on("error",v),e&&(e._readyState=A.CLOSING,this.destroy())}Object.defineProperty(A,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(A.prototype,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(A,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(A.prototype,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(A,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(A.prototype,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(A,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),Object.defineProperty(A.prototype,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(A.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(A.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[g])return t[_];return null},set(t){for(const t of this.listeners(e))if(t[g]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[g]:!0})}})})),A.prototype.addEventListener=S,A.prototype.removeEventListener=E,e.exports=A},2357:e=>{"use strict";e.exports=require("assert")},4293:e=>{"use strict";e.exports=require("buffer")},6772:e=>{"use strict";if("undefined"==typeof bufferutil){var t=new Error("Cannot find module 'bufferutil'");throw t.code="MODULE_NOT_FOUND",t}e.exports=bufferutil},7619:e=>{"use strict";e.exports=require("constants")},6417:e=>{"use strict";e.exports=require("crypto")},881:e=>{"use strict";e.exports=require("dns")},8933:e=>{"use strict";e.exports=require("electron")},8614:e=>{"use strict";e.exports=require("events")},5747:e=>{"use strict";e.exports=require("fs")},8605:e=>{"use strict";e.exports=require("http")},7565:e=>{"use strict";e.exports=require("http2")},7211:e=>{"use strict";e.exports=require("https")},1631:e=>{"use strict";e.exports=require("net")},2087:e=>{"use strict";e.exports=require("os")},5622:e=>{"use strict";e.exports=require("path")},2413:e=>{"use strict";e.exports=require("stream")},4016:e=>{"use strict";e.exports=require("tls")},8835:e=>{"use strict";e.exports=require("url")},6993:e=>{"use strict";if(typeof utf-8-validate==="undefined"){var t=new Error("Cannot find module 'utf-8-validate'");throw t.code="MODULE_NOT_FOUND",t}e.exports=utf-8-validate},1669:e=>{"use strict";e.exports=require("util")},8761:e=>{"use strict";e.exports=require("zlib")},5982:e=>{"use strict";e.exports=JSON.parse('["1.1.1.1","10.0.0.1","10.0.0.138","10.0.0.2","10.0.1.1","10.1.1.1","10.1.10.1","10.10.1.1","10.90.90.90","192.168.0.1","192.168.0.10","192.168.0.100","192.168.0.101","192.168.0.227","192.168.0.254","192.168.0.3","192.168.0.30","192.168.0.50","192.168.1.1","192.168.1.10","192.168.1.100","192.168.1.200","192.168.1.210","192.168.1.220","192.168.1.254","192.168.1.99","192.168.10.1","192.168.10.10","192.168.10.100","192.168.10.50","192.168.100.1","192.168.100.100","192.168.102.1","192.168.11.1","192.168.123.254","192.168.15.1","192.168.16.1","192.168.168.168","192.168.178.1","192.168.2.1","192.168.2.254","192.168.20.1","192.168.223.100","192.168.251.1","192.168.254.254","192.168.3.1","192.168.30.1","192.168.4.1","192.168.50.1","192.168.55.1","192.168.62.1","192.168.8.1","200.200.200.5"]')}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var s={};(()=>{"use strict";r.d(s,{T:()=>D});var e=r(8933);const t="function"==typeof btoa,o="function"==typeof Buffer,n=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder&&new TextEncoder,[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="]),i=((e=>{let t={};e.forEach(((e,r)=>t[e]=r))})(n),String.fromCharCode.bind(String),"function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>{let t,r,s,o,i="";const a=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(s=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=r<<16|s<<8|o,i+=n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}return a?i.slice(0,a-3)+"===".substring(a):i}),a=t?e=>btoa(e):o?e=>Buffer.from(e,"binary").toString("base64"):i;var c=r(2087),l=r.n(c),u=r(5622),h=r.n(u),d=r(5674),f=r.n(d);const p=h().resolve(l().homedir(),"alicorn","alicorn.config.json"),m=h().resolve(function(){const e=r(8933);return void 0===e.app?e.ipcRenderer.sendSync("getAppPath"):e.app.getAppPath()}(),"defaults","alicorn.config.json");let y={},g={};function _(e,t){let r=y[e];return void 0===r&&(r=y[e]=g[e]),void 0===r?t:r}function w(e,t=!1){return!!_(e,t)}function b(e,t=0){return function(e,t=0){if("number"==typeof e)return e;if("string"==typeof e){const t=parseInt(e);if(!isNaN(t))return t;const r=parseFloat(e);if(!isNaN(r))return r}return t}(_(e,t),t)}async function v(){await f().ensureDir(h().dirname(p));const e=f().createReadStream(m).pipe(f().createWriteStream(p));return new Promise(((t,r)=>{e.on("finish",(()=>{t()})),e.on("error",(e=>{r(e)}))}))}var S=r(9393),E=r.n(S);let x;function k(){return x}let O=null,T=null;const C=/(?<=\?code=)[^&]+/gi,P=/(?<=\?error=)[^&]+/gi,A=/(?<=&error_description=)[^&]+/gi;function R(){e.ipcMain.on("closeWindow",(()=>{console.log("Closing window!");try{D()?.close()}catch{}try{O?.destroy()}catch{}try{T?.destroy()}catch{}try{k()?.destroy()}catch{}console.log("All windows are closed.")})),e.ipcMain.on("getAppPath",(t=>{t.returnValue=e.app.getAppPath()})),e.ipcMain.on("openDevTools",(()=>{D()?.webContents.openDevTools()})),e.ipcMain.handle("selectDir",(async()=>{const t=await e.dialog.showOpenDialog({properties:["openDirectory","createDirectory","promptToCreate"]});return t.canceled?"":t.filePaths[0]||""})),e.ipcMain.handle("selectModpack",(async()=>{const t=await e.dialog.showOpenDialog({properties:["openFile"],filters:[{name:"Modpack Archive",extensions:["zip"]},{name:"Install.json Generic Profile",extensions:["json"]}]});return t.canceled?"":t.filePaths[0]||""})),e.ipcMain.handle("selectJava",(async()=>{const t=await e.dialog.showOpenDialog({properties:["openFile","dontAddToRecent"],filters:"win32"===l().platform()?[{name:"Java Executable",extensions:["exe"]}]:[]});return t.canceled?"":t.filePaths[0]||""})),e.ipcMain.handle("msBrowserCode",(async(t,r)=>{try{let t="";const{width:s,height:o}=e.screen.getPrimaryDisplay().workAreaSize;return O=O||new e.BrowserWindow({frame:!1,width:Math.floor(.6*s),height:Math.floor(.6*o),show:!1,webPreferences:{enableRemoteModule:!1}}),r.trim().length>0&&await O.webContents.session.setProxy({proxyRules:`${r},direct://`}),await O.loadURL("https://login.live.com/oauth20_authorize.srf?client_id=00000000402b5328&response_type=code&scope=service%3A%3Auser.auth.xboxlive.com%3A%3AMBI_SSL&redirect_uri=https%3A%2F%2Flogin.live.com%2Foauth20_desktop.srf"),new Promise((e=>{O?.on("close",(()=>{""===t&&(console.log("Unexpected window closing, what have you done?"),e(""))})),O?.webContents.on("did-stop-loading",(()=>{const r=O?.webContents.getURL();if(r?.startsWith("https://login.live.com/oauth20_desktop.srf")){if(C.test(r))return console.log("Code found. Closing login window."),t=unescape((r.match(C)||[])[0]||""),O?.close(),O=null,void e(t);P.test(r)&&(t="NOT FOUND",console.log("Error during login: "+unescape((r.match(P)||[])[0]||"")),console.log("Caused by: "+unescape((r.match(A)||[])[0]||""))),console.log("Error occurred. Closing login window."),O?.close(),O=null,e("")}else console.log("Not a callback URL, showing window..."),O?.show()}))}))}catch{}})),e.ipcMain.handle("msLogout",(async(t,r)=>(console.log("Creating logout window!"),T=new e.BrowserWindow({frame:!1,width:960,height:540,show:!1,webPreferences:{enableRemoteModule:!1}}),r.trim().length>0&&await T.webContents.session.setProxy({proxyRules:`${r},direct://`}),await T.loadURL("https://account.microsoft.com/"),new Promise((e=>{T?.webContents.on("dom-ready",(()=>{const t=T?.webContents.executeJavaScript('var e=document.getElementById("mectrl_body_signOut");if(e!==null&&typeof e==="object"&&typeof e["click"]==="function"){e.click()}');void 0!==t&&t.then((()=>{console.log("Command sent, but this window will not be closed until totally finished."),e()})).catch((()=>{e()}))})),T?.webContents.on("did-stop-loading",(()=>{T?.webContents.getURL().startsWith("https://account.microsoft.com/account/Account")&&(console.log("Logout finished, closing window!"),e(),T?.close(),T=null)}))}))))),e.ipcMain.handle("openBrowser",(async(t,r,s)=>{await async function(t,r){console.log("Opening browser window!");const{width:s,height:o}=e.screen.getPrimaryDisplay().workAreaSize;x=new e.BrowserWindow({webPreferences:{nodeIntegration:t,contextIsolation:!1,sandbox:!1,preload:h().resolve(e.app.getAppPath(),"Starlight.js"),enableRemoteModule:!1},height:Math.floor(.7*o),width:Math.floor(.7*s),title:"Talking to the princess..."}),r.trim().length>0&&await x.webContents.session.setProxy({proxyRules:`${r},direct://`}),x.setMenu(null),x.on("close",(()=>{x?.destroy()})),x.show(),x.webContents.openDevTools();try{await x.loadURL("https://www.mcbbs.net")}catch{}}(r,s)})),e.ipcMain.handle("getMainWindow",(()=>D()?.webContents.id||0)),e.ipcMain.on("reloadConfig",(async()=>{await async function(){try{await async function(e){if(0===e.length)return!1;try{const t=await f().stat(e);return t.isDirectory()||t.size>0}catch{return!1}}(p)||await v(),y=JSON.parse((await f().readFile(p)).toString())}catch{await v()}try{g=Object.freeze(JSON.parse((await f().readFile(p)).toString()))}catch{}}(),console.log("Config reloaded.")})),e.ipcMain.on("reportError",((t,r)=>{w("dev.explicit-error-throw")&&e.dialog.showErrorBox("Oops!",r)})),e.ipcMain.on("registerHotKey",((t,r,s=r)=>{w("hot-key")&&e.globalShortcut.register(r,(()=>{D()?.webContents.send(s)}))})),e.ipcMain.handle("isReachable",(async(e,t,r)=>await E()(t,{timeout:r||b("starlight.join-server.timeout",2e3)}))),e.ipcMain.on("hideWindow",(()=>{D()?.hide()})),e.ipcMain.on("showWindow",(()=>{D()?.show()})),e.ipcMain.on("changeDir",((e,t)=>{process.chdir(t)})),e.ipcMain.handle("getElectronVersion",(()=>Promise.resolve(process.versions.electron)))}var N=r(8777);let L;console.log("Starting Alicorn!");let j=null;function D(){return j}console.log("Loading config..."),function(){try{y=JSON.parse(f().readFileSync(p).toString())}catch{y=JSON.parse(f().readFileSync(m).toString())}}(),w("hardware-acc")||e.app.disableHardwareAcceleration(),e.app.on("ready",(async()=>{console.log(`With Electron ${process.versions.electron}, Node.js ${process.versions.node} and Chrome ${process.versions.chrome}`);const t=e.app.getAppPath();console.log("App is ready, preparing window...");const{width:r,height:s}=e.screen.getPrimaryDisplay().workAreaSize;j=new e.BrowserWindow({width:Math.floor(.5*r),height:Math.floor(.5*s),webPreferences:{webSecurity:!1,nodeIntegration:!0,nodeIntegrationInWorker:!0,contextIsolation:!1,sandbox:!1,enableRemoteModule:!1},frame:!1,show:!1}),j.setMenu(null),console.log("Loading resources..."),console.log("Registering event listeners..."),R(),j.once("ready-to-show",(()=>{console.log("Creating window!"),j?.show(),console.log("All caught up! Alicorn is now initialized."),w("dev")&&(console.log("Development mode detected, opening devtools..."),j?.webContents.openDevTools())})),console.log("Preparing window!"),w("hot-key")&&(e.globalShortcut.register("Ctrl+F12",(()=>{w("dev.f12")&&j?.webContents.openDevTools()})),e.globalShortcut.register("Shift+F12",(()=>{w("dev.f12")&&k()?.webContents.openDevTools()}))),await j.loadFile(h().resolve(t,"Renderer.html")),console.log("Preparing WS!"),L=new N.Server({port:16814}),L.on("connection",(t=>{console.log("OPENED: Alicorn <============> Starlight"),t.on("message",(r=>{const s=JSON.parse(r.toString());D()?.webContents.send(s.channel+"_A_MAIN",s.eid,s.args||[]),e.ipcMain.once(s.channel+"_A_MAIN"+s.eid,((e,r)=>{t.send(JSON.stringify({eid:s.eid,value:r}))}))})),t.on("close",(()=>{console.log("CLOSED: Alicorn <            > Starlight")}))})),console.log("Setting up proxy!")})),e.app.on("window-all-closed",(()=>{"darwin"!==l().platform()&&(console.log("Stopping!"),console.log("Stopping WS!"),L.close(),e.app.quit())})),e.app.on("will-quit",(()=>{console.log("Finalizing and exiting...")})),process.on("uncaughtException",(async e=>{try{console.log(e),await(j?.webContents.loadFile("Error.html",{hash:a(escape(String(e.message)))}))}catch{}})),process.on("unhandledRejection",(async e=>{try{console.log(String(e)),await(j?.webContents.loadFile("Error.html",{hash:a(encodeURI(String(e)))}))}catch{}}))})()})();