"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SPECIAL_HEADERS=exports.HEADER_STATE=exports.MINOR=exports.MAJOR=exports.CONNECTION_TOKEN_CHARS=exports.HEADER_CHARS=exports.TOKEN=exports.STRICT_TOKEN=exports.HEX=exports.URL_CHAR=exports.STRICT_URL_CHAR=exports.USERINFO_CHARS=exports.MARK=exports.ALPHANUM=exports.NUM=exports.HEX_MAP=exports.NUM_MAP=exports.ALPHA=exports.FINISH=exports.H_METHOD_MAP=exports.METHOD_MAP=exports.METHODS_RTSP=exports.METHODS_ICE=exports.METHODS_HTTP=exports.METHODS=exports.LENIENT_FLAGS=exports.FLAGS=exports.TYPE=exports.ERROR=void 0;const utils_1=require("./utils");var ERROR,TYPE,FLAGS,LENIENT_FLAGS,METHODS,FINISH,HEADER_STATE;!function(E){E[E.OK=0]="OK",E[E.INTERNAL=1]="INTERNAL",E[E.STRICT=2]="STRICT",E[E.LF_EXPECTED=3]="LF_EXPECTED",E[E.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",E[E.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",E[E.INVALID_METHOD=6]="INVALID_METHOD",E[E.INVALID_URL=7]="INVALID_URL",E[E.INVALID_CONSTANT=8]="INVALID_CONSTANT",E[E.INVALID_VERSION=9]="INVALID_VERSION",E[E.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",E[E.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",E[E.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",E[E.INVALID_STATUS=13]="INVALID_STATUS",E[E.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",E[E.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",E[E.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",E[E.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",E[E.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",E[E.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",E[E.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",E[E.PAUSED=21]="PAUSED",E[E.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",E[E.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",E[E.USER=24]="USER"}(ERROR=exports.ERROR||(exports.ERROR={})),function(E){E[E.BOTH=0]="BOTH",E[E.REQUEST=1]="REQUEST",E[E.RESPONSE=2]="RESPONSE"}(TYPE=exports.TYPE||(exports.TYPE={})),function(E){E[E.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",E[E.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",E[E.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",E[E.CHUNKED=8]="CHUNKED",E[E.UPGRADE=16]="UPGRADE",E[E.CONTENT_LENGTH=32]="CONTENT_LENGTH",E[E.SKIPBODY=64]="SKIPBODY",E[E.TRAILING=128]="TRAILING",E[E.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"}(FLAGS=exports.FLAGS||(exports.FLAGS={})),function(E){E[E.HEADERS=1]="HEADERS",E[E.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",E[E.KEEP_ALIVE=4]="KEEP_ALIVE"}(LENIENT_FLAGS=exports.LENIENT_FLAGS||(exports.LENIENT_FLAGS={})),function(E){E[E.DELETE=0]="DELETE",E[E.GET=1]="GET",E[E.HEAD=2]="HEAD",E[E.POST=3]="POST",E[E.PUT=4]="PUT",E[E.CONNECT=5]="CONNECT",E[E.OPTIONS=6]="OPTIONS",E[E.TRACE=7]="TRACE",E[E.COPY=8]="COPY",E[E.LOCK=9]="LOCK",E[E.MKCOL=10]="MKCOL",E[E.MOVE=11]="MOVE",E[E.PROPFIND=12]="PROPFIND",E[E.PROPPATCH=13]="PROPPATCH",E[E.SEARCH=14]="SEARCH",E[E.UNLOCK=15]="UNLOCK",E[E.BIND=16]="BIND",E[E.REBIND=17]="REBIND",E[E.UNBIND=18]="UNBIND",E[E.ACL=19]="ACL",E[E.REPORT=20]="REPORT",E[E.MKACTIVITY=21]="MKACTIVITY",E[E.CHECKOUT=22]="CHECKOUT",E[E.MERGE=23]="MERGE",E[E["M-SEARCH"]=24]="M-SEARCH",E[E.NOTIFY=25]="NOTIFY",E[E.SUBSCRIBE=26]="SUBSCRIBE",E[E.UNSUBSCRIBE=27]="UNSUBSCRIBE",E[E.PATCH=28]="PATCH",E[E.PURGE=29]="PURGE",E[E.MKCALENDAR=30]="MKCALENDAR",E[E.LINK=31]="LINK",E[E.UNLINK=32]="UNLINK",E[E.SOURCE=33]="SOURCE",E[E.PRI=34]="PRI",E[E.DESCRIBE=35]="DESCRIBE",E[E.ANNOUNCE=36]="ANNOUNCE",E[E.SETUP=37]="SETUP",E[E.PLAY=38]="PLAY",E[E.PAUSE=39]="PAUSE",E[E.TEARDOWN=40]="TEARDOWN",E[E.GET_PARAMETER=41]="GET_PARAMETER",E[E.SET_PARAMETER=42]="SET_PARAMETER",E[E.REDIRECT=43]="REDIRECT",E[E.RECORD=44]="RECORD",E[E.FLUSH=45]="FLUSH"}(METHODS=exports.METHODS||(exports.METHODS={})),exports.METHODS_HTTP=[METHODS.DELETE,METHODS.GET,METHODS.HEAD,METHODS.POST,METHODS.PUT,METHODS.CONNECT,METHODS.OPTIONS,METHODS.TRACE,METHODS.COPY,METHODS.LOCK,METHODS.MKCOL,METHODS.MOVE,METHODS.PROPFIND,METHODS.PROPPATCH,METHODS.SEARCH,METHODS.UNLOCK,METHODS.BIND,METHODS.REBIND,METHODS.UNBIND,METHODS.ACL,METHODS.REPORT,METHODS.MKACTIVITY,METHODS.CHECKOUT,METHODS.MERGE,METHODS["M-SEARCH"],METHODS.NOTIFY,METHODS.SUBSCRIBE,METHODS.UNSUBSCRIBE,METHODS.PATCH,METHODS.PURGE,METHODS.MKCALENDAR,METHODS.LINK,METHODS.UNLINK,METHODS.PRI,METHODS.SOURCE],exports.METHODS_ICE=[METHODS.SOURCE],exports.METHODS_RTSP=[METHODS.OPTIONS,METHODS.DESCRIBE,METHODS.ANNOUNCE,METHODS.SETUP,METHODS.PLAY,METHODS.PAUSE,METHODS.TEARDOWN,METHODS.GET_PARAMETER,METHODS.SET_PARAMETER,METHODS.REDIRECT,METHODS.RECORD,METHODS.FLUSH,METHODS.GET,METHODS.POST],exports.METHOD_MAP=utils_1.enumToMap(METHODS),exports.H_METHOD_MAP={},Object.keys(exports.METHOD_MAP).forEach((E=>{/^H/.test(E)&&(exports.H_METHOD_MAP[E]=exports.METHOD_MAP[E])})),function(E){E[E.SAFE=0]="SAFE",E[E.SAFE_WITH_CB=1]="SAFE_WITH_CB",E[E.UNSAFE=2]="UNSAFE"}(FINISH=exports.FINISH||(exports.FINISH={})),exports.ALPHA=[];for(let E="A".charCodeAt(0);E<="Z".charCodeAt(0);E++)exports.ALPHA.push(String.fromCharCode(E)),exports.ALPHA.push(String.fromCharCode(E+32));exports.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},exports.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},exports.NUM=["0","1","2","3","4","5","6","7","8","9"],exports.ALPHANUM=exports.ALPHA.concat(exports.NUM),exports.MARK=["-","_",".","!","~","*","'","(",")"],exports.USERINFO_CHARS=exports.ALPHANUM.concat(exports.MARK).concat(["%",";",":","&","=","+","$",","]),exports.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(exports.ALPHANUM),exports.URL_CHAR=exports.STRICT_URL_CHAR.concat(["\t","\f"]);for(let E=128;E<=255;E++)exports.URL_CHAR.push(E);exports.HEX=exports.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]),exports.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(exports.ALPHANUM),exports.TOKEN=exports.STRICT_TOKEN.concat([" "]),exports.HEADER_CHARS=["\t"];for(let E=32;E<=255;E++)127!==E&&exports.HEADER_CHARS.push(E);exports.CONNECTION_TOKEN_CHARS=exports.HEADER_CHARS.filter((E=>44!==E)),exports.MAJOR=exports.NUM_MAP,exports.MINOR=exports.MAJOR,function(E){E[E.GENERAL=0]="GENERAL",E[E.CONNECTION=1]="CONNECTION",E[E.CONTENT_LENGTH=2]="CONTENT_LENGTH",E[E.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",E[E.UPGRADE=4]="UPGRADE",E[E.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",E[E.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",E[E.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",E[E.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"}(HEADER_STATE=exports.HEADER_STATE||(exports.HEADER_STATE={})),exports.SPECIAL_HEADERS={connection:HEADER_STATE.CONNECTION,"content-length":HEADER_STATE.CONTENT_LENGTH,"proxy-connection":HEADER_STATE.CONNECTION,"transfer-encoding":HEADER_STATE.TRANSFER_ENCODING,upgrade:HEADER_STATE.UPGRADE};