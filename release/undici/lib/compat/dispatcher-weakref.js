"use strict";const{kConnected,kSize}=require("../core/symbols");class CompatWeakRef{constructor(e){this.value=e}deref(){return 0===this.value[kConnected]&&0===this.value[kSize]?void 0:this.value}}class CompatFinalizer{constructor(e){this.finalizer=e}register(e,i){e.on("disconnect",(()=>{0===e[kConnected]&&0===e[kSize]&&this.finalizer(i)}))}}module.exports=function(){return{WeakRef:global.WeakRef||CompatWeakRef,FinalizationRegistry:global.FinalizationRegistry||CompatFinalizer}};